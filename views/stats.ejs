<DOCTYPE html>
<head>
<title>Tag Tester</title>
<script type="text/javascript">
//tealium universal tag - utag.loader ut4.0.201808291751, Copyright 2018 Tealium.com Inc. All Rights Reserved.
if(typeof utag_err=='undefined')var utag_err=[];window._tealium_old_error=window._tealium_old_error||window.onerror||function(){};window.onerror=function(m,u,l){if(typeof u!=='undefined'&&u.indexOf('/utag.')>0&&utag_err.length<5)utag_err.push({e:m,s:u,l:l,t:'js'});window._tealium_old_error(m,u,l)};var utag_condload=false;try{(function(){function ul(src,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;a.getElementsByTagName('head')[0].appendChild(b)};if((""+document.cookie).match("utag_env_cvs_cvs=(\/\/tags\.tiqcdn\.com\/utag\/cvs\/[^\S;]*)")){if(RegExp.$1.indexOf("/qa/")===-1){var s=RegExp.$1;while(s.indexOf("%")!=-1){s=decodeURIComponent(s);}s=s.replace(/\.\./g,"");ul(s);utag_condload=true;__tealium_default_path='//tags.tiqcdn.com/utag/cvs/cvs/qa/';}}})();}catch(e){};try{(function(a,b,c){if(typeof utag_data=='undefined')utag_data={};a=location.pathname.split('/');b=(a.length>9)?9:a.length;for(c=1;c<b;c++){utag_data['_pathname'+c]=(typeof a[c]!='undefined')?a[c]:''}})();}catch(e){};if(!utag_condload){try{if(!navigator.cookieEnabled){if((window.location.href.indexOf("accessibility")!==-1)||(window.location.href.indexOf("shop")!==-1)||(window.location.href.indexOf("account")!==-1)||(window.location.href.indexOf("deals")!==-1)||(window.location.href.indexOf("weeklyad")!==-1)||(window.location.href.indexOf("store-locator")!==-1)||(window.location.href.indexOf("minuteclinic")!==-1)||(window.location.href.indexOf("checkout")!==-1)){if((navigator.userAgent.toLowerCase().search("cvs_iphone_app")===-1)&&(navigator.userAgent.toLowerCase().search("cvs_android_app")===-1)){window.location.href="https://www.cvs.com/promo/promoLandingTemplate.jsp?promoLandingId=error-cookie";}}}}catch(e){}};if(!utag_condload){try{try{if((document.location.pathname.indexOf('/webcontent/components/DRStC/src/dist/')>-1)||(document.location.pathname.indexOf('/express')==0)||(document.location.pathname=='/account/account-management.jsp')||(document.location.pathname=='/account/creation')){window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.noview=true;}
var gcntFormFieldFocus=0;var geVar34=0;var g_pageErrors='';var gRXDetails=null;var gproducts='';var gstoreID='';var gShoppingCartItems=0;var gLookUpFlag='false';var gEcCounter='false';var gsensitiveFlag=true;var grxTransfer='';var gProductsFlag=false;var gECSignin=0;}catch(e){}}catch(e){}};if(typeof utag=="undefined"&&!utag_condload){var utag={id:"cvs.cvs",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_cvs.cvs_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(a,b,c,d,f){try{if(typeof utag.data['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(utag.data['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0}}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}}}}}}catch(e){utag.DB(e)}},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=eval("document."+"referrer");o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=b||utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}
o["_t_visitor_id"]=o["cp.utag_main_v_id"];o["_t_session_id"]=o["cp.utag_main_ses_id"];},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;o["ut.event"]=a||"view";try{o["ut.account"]=utag.cfg.utid.split("/")[0];o["ut.profile"]=utag.cfg.utid.split("/")[1];o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}},RD:function(o,a,b,c,d){utag.DB("utag.loader.RD");utag.DB(o);if(!utag.loader.rd_flag){a=(new Date()).getTime();b=utag.loader.RC();c=a+parseInt(utag.cfg.session_timeout);d=a;if(!b.utag_main){b.utag_main={};}else if(b.utag_main.ses_id&&typeof b.utag_main._st!="undefined"&&parseInt(b.utag_main._st)<a){delete b.utag_main.ses_id;}
if(!b.utag_main.v_id){b.utag_main.v_id=utag.ut.vi(a);}
if(!b.utag_main.ses_id){b.utag_main.ses_id=d+'';b.utag_main._ss=b.utag_main._pn=1;b.utag_main._sn=1+parseInt(b.utag_main._sn||0);}else{d=b.utag_main.ses_id;b.utag_main._ss=0;b.utag_main._pn=1+parseInt(b.utag_main._pn);b.utag_main._sn=parseInt(b.utag_main._sn);}
if(isNaN(b.utag_main._sn)||b.utag_main._sn<1){b.utag_main._sn=b.utag_main._pn=1}
b.utag_main._st=c+'';utag.loader.SC("utag_main",{"v_id":b.utag_main.v_id,"_sn":b.utag_main._sn,"_ss":b.utag_main._ss,"_pn":b.utag_main._pn+";exp-session","_st":c,"ses_id":d+";exp-session"});}
utag.loader.rd_flag=1;this.RDqp(o);this.RDmeta(o);this.RDcp(o,b);this.RDdom(o);this.RDut(o);this.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();(function(a,b,c,l){if(typeof utag_err!='undefined'&&utag_err.length>0){a='//uconnect.tealiumiq.com/ulog/_error?utid='+utag.cfg.utid;l=utag_err.length>5?5:utag_err.length;for(b=0;b<l;b++){c=utag_err[b];a+='&e'+b+'='+encodeURIComponent(c.t+'::'+c.l+'::'+c.s+'::'+c.e);}
utag.dbi.push((new Image()).src=a);}})();v=".tiqcdn.com";w=utag.cfg.path.indexOf(v);if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:utag.cfg.path.substring(0,w)+v+"/ut"+"ag/tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){utag.db_log=[];b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a,cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a,cfg:{cb:c,uids:d}})},track:function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c}};for(d in utag.loader.GV(utag.o)){try{utag.o[d].handler.trigger(a.event||"view",a.data||a,a.cfg)}catch(e){utag.DB(e)};}
if(a.cfg&&a.cfg.cb)try{a.cfg.cb()}catch(e){utag.DB(e)};return true},handler:{base:"page_name,page_category",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(utag.data);utag.loader.loadrules();utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.cfg.noview=false;utag.ut.merge(b,this.df,0);utag.loader.RDqp(b);utag.loader.RDcp(b);utag.loader.RDdom(b);utag.loader.RDmeta(b);utag.loader.RDut(b,a);utag.loader.RDva(b);function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2&&utag.loader.cfg[d].s2s!=1){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];sendTag(a,b,d);}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");utag.ut.merge(utag.data,b,1);this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");utag.loader.SC("utag_main",{"_st":((new Date()).getTime()+parseInt(utag.cfg.session_timeout))});},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l){a=document;if(o.type=="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l]}
b.src=o.src;}
if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}};utag.o['cvs.cvs']=utag;utag.cfg={template:"ut4.39.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),path:"//tags.tiqcdn.com/utag/cvs/cvs/qa/",utid:"cvs/cvs/201808291750"};utag.cfg.v=utag.cfg.template+"201808291751";try{var _gaq=_gaq||[];var pageTracker=pageTracker||{_trackEvent:function(c,d,e,f,g){g={ga_eventCat:c,ga_eventAction:d,ga_eventLabel:e,ga_eventValue:f};utag.link(g,null,[24]);},_trackPageview:function(c){_gaq.push(['_trackPageview',c?c:null]);}}}catch(e){};utag.cond={102:0,103:0,107:0,109:0,120:0,132:0,16:0,55:0,73:0,82:0,87:0};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'102':try{c[102]|=(d['dom.url'].toString().toLowerCase().indexOf('/shop/brand-shop/f/flonase/N-cwc86s'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/circular'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'103':try{c[103]|=(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/circular'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/weeklyad'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'107':try{c[107]|=(d['dom.pathname'].toString().toLowerCase().indexOf('/shop/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/search/'.toLowerCase())>-1)||(typeof d['page_name']!='undefined'&&d['page_name'].toString().toLowerCase()=='shop: checkout: confirmation page'.toLowerCase())}catch(e){utag.DB(e)};break;case'109':try{c[109]|=(d['dom.url'].toString().toLowerCase().indexOf('www.cvs.com'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('m.cvs.com'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('es.cvs.com'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'120':try{c[120]|=(/^\/checkout\/fs\/checkout\.jsp/i.test(d['dom.pathname']))||(/^\/checkout\/fs\/orderconfirmation\.jsp/i.test(d['dom.pathname']))||(/^\/account\/createanaccount_confirm\.jsp/i.test(d['dom.pathname']))||(/^\/extracare\/new_card_confirmation\.jsp/i.test(d['dom.pathname']))||(/^\/extracare\/home/i.test(d['dom.pathname']))||(/^\/mobile-cvs\/apps/i.test(d['dom.pathname']))||(d['dom.pathname'].toString().toLowerCase().indexOf('account/rx/rx-acc-combined-signup.jsp'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'132':try{c[132]|=(typeof d['platform']!='undefined'&&d['platform'].toString().toLowerCase()!='mapp'.toLowerCase()&&d['platform'].toString().toLowerCase()!='cvs_iphone_app'.toLowerCase()&&d['platform'].toString().toLowerCase().indexOf('cvs_android_app'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'16':try{c[16]|=(d['page_name'].toString().toLowerCase().indexOf('shop: checkout: confirmation page'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'55':try{c[55]|=(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/store'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'73':try{c[73]|=(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/minuteclinic/'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'82':try{c[82]|=(d['dom.pathname'].toString().toLowerCase().indexOf('/mobile/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/promo/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/content/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/webcontent/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/extracare'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/getyourbucks'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/marketing/'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/weeklyad'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/shop'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/store-locator'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/stores'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/checkout'.toLowerCase())>-1)||(d['dom.pathname'].toString().toLowerCase().indexOf('/search'.toLowerCase())>-1)||(/^\/express\//i.test(d['dom.pathname']))||(/^\/account\/photo-login\.jsp/i.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'87':try{c[87]|=(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/shop/baby-child/bath-skin-care/N-3tZ1w7gZepu2dxZepu2czZe6tmZ2k?sortBy=highestRated&navNum=100&DCSext.TriadCampID=A4586'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('cvs.com/search/N-0?searchTerm=JNJBabyHeadToToe'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){try{if(1){b['wt_ad_impression']='None'}}catch(e){utag.DB(e)}},function(a,b){try{var pcol=b["dom.referrer"];var setaction;var surl=window.location.href;if(pcol.search("google.com")!=-1||pcol.search("yahoo.com")!=-1||pcol.search("bing.com")!=-1||pcol.search("aol.com")!=-1||pcol.search("ask.com")!=-1||pcol.search("naver.com")!=-1||pcol.search("blekko.com")!=-1||pcol.search("searchalot.com")!=-1||pcol.search("daum.net")!=-1||pcol.search("facebook.com")!=-1||pcol.search("youtube.com")!=-1||pcol.search("twitter.com")!=-1||pcol.search("linkedin.com")!=-1)
{setaction="true";}
if(pcol.indexOf("cvs.com")<=-1||setaction=="true"||pcol=="undefined"||pcol.length==0)
{var wt_mcid=b["qp.wt.mc_id"]||b["qp.WT.mc_id"]||b["qp.WT.MC_ID"];if(typeof wt_mcid!="undefined")
{wt_mcid=wt_mcid.slice(0,2);if(wt_mcid=="em"||wt_mcid=="_e"||wt_mcid=="_E"||wt_mcid=="EM"||wt_mcid=="Em"){b.Marketing_Chnl="Email";}
else if(wt_mcid=="ps"||wt_mcid=="PS"||wt_mcid=="Ps"){b.Marketing_Chnl="Paid Search";}
else if(wt_mcid=="ls"||wt_mcid=="L_"||wt_mcid=="l_"||wt_mcid=="LS"||wt_mcid=="Ls"){b.Marketing_Chnl="Local Search";}
else if(wt_mcid=="od"||wt_mcid=="OD"||wt_mcid=="Od"){b.Marketing_Chnl="Online Display";}
else if(wt_mcid=="dm"||wt_mcid=="DM"||wt_mcid=="Dm"){b.Marketing_Chnl="Direct Marketing";}
else if(wt_mcid=="sm"||wt_mcid=="os"||wt_mcid=="SM"||wt_mcid=="OS"||wt_mcid=="Os"||wt_mcid=="Sm"){b.Marketing_Chnl="Social Campaigns";}
else if(wt_mcid=="af"||wt_mcid=="AF"||wt_mcid=="Af"){b.Marketing_Chnl="Affiliate";}
else{b.Marketing_Chnl="Other Marketing Campaign";}}
if(typeof wt_mcid=="undefined")
{if(pcol.search("google.com")!=-1||pcol.search("yahoo.com")!=-1||pcol.search("bing.com")!=-1||pcol.search("aol.com")!=-1||pcol.search("ask.com")!=-1||pcol.search("naver.com")!=-1||pcol.search("blekko.com")!=-1||pcol.search("searchalot.com")!=-1||pcol.search("daum.net")!=-1)
{b.Marketing_Chnl="Organic Search";}else if(pcol.search("facebook.com")!=-1||pcol.search("youtube.com")!=-1||pcol.search("twitter.com")!=-1||pcol.search("linkedin.com")!=-1)
{b.Marketing_Chnl="Social Media";}else{b.Marketing_Chnl="Direct";}}
if(surl.search("cvs.com/drug")!=-1)
{b.entry_page_category="Content: Drug Information";}
else if(surl=="http://www.cvs.com"||surl=="https://www.cvs.com"||surl=="www.cvs.com"||surl=="http://www.cvs.com/"||surl.search("cvs.com/home.jsp")!=-1)
{b.entry_page_category="Content: Home";}
else if(surl.search("cvs.com/pharmacy")!=-1)
{b.entry_page_category="Content: Pharmacy";if(surl.search("/pharmacy/manage")!=-1||surl.search("/pharmacy/prescription")!=-1||surl.search("/pharmacy/popup")!=-1||surl.search("/msnhealthvault")!=-1)
{b.entry_page_category="Rx Hub";}}
else if(surl.search("cvs.com/search")!=-1)
{b.entry_page_category="Content: Onsite Search";}
else if(surl.search("cvs.com/shop")!=-1)
{b.entry_page_category="Content: Shop";if(surl.search("shop/Household")!=-1||surl.search("/shop/Household")!=-1)
{b.entry_page_subcategory="Household";}
else if(surl.search("shop/brand-shop")!=-1)
{b.entry_page_subcategory="Brand Shops";}
else if(surl.search("shop/Personal-Care")!=-1)
{b.entry_page_subcategory="Personal Care";}
else if(surl.search("shop/Baby-&-Child")!=-1)
{b.entry_page_subcategory="Baby & Child";}
else if(surl.search("shop/Beauty")!=-1)
{b.entry_page_subcategory="Beauty";}
else if(surl.search("shop/Diet-&-Nutrition")!=-1)
{b.entry_page_subcategory="Diet & Nutrition";}
else if(surl.search("shop/Health-&-Medicine")!=-1)
{b.entry_page_subcategory="Health & Medicine";}
else if(surl.search("shop/Home-Health-Care")!=-1)
{b.entry_page_subcategory="Home-Health-Care";}
else if(surl.search("shop/Sexual-Health")!=-1)
{b.entry_page_subcategory="Sexual Health";}
else if(surl.search("shop/Skin-Care")!=-1)
{b.entry_page_subcategory="Skin Care";}
else if(surl.search("shop/Vitamins")!=-1)
{b.entry_page_subcategory="Vitamins";}
else if(surl.search("shop/product-detail")!=-1)
{b.entry_page_subcategory=" Product Detail";}}
else if(surl.search("cvs.com/extracare")!=-1||surl.search("cvs.com/marketing/extracare")!=-1||surl.search("cvs.com/getyourbucks")!=-1)
{b.entry_page_category="Content: ExtraCare";}
else if(surl.search("cvs.com/drug")!=-1)
{b.entry_page_category="Content: Drug";if(surl.search("/drug/overview")!=-1||surl.search("/drug/detail")!=-1||surl.search("drug/summary")!=-1)
{b.entry_page_subcategory="Content: Pharmacy:Drug 2";}}
else if(surl.search("cvs.com/account")!=-1)
{b.entry_page_category="Content: Account";}
else if(surl.search("cvs.com/help")!=-1)
{b.entry_page_category="Content: Help";}
else if(surl.search("cvs.com/stores")!=-1)
{b.entry_page_category="Content: Store Locator";}
else if(surl.search("cvs.com/weeklyad")!=-1)
{b.entry_page_category="Content: Weekly Ad";}
else if(surl.search("cvs.com/checkout")!=-1)
{b.entry_page_category="Content: Viewed Cart/Checkout";if(surl.search("checkout/fs/confirmed_order.jsp")!=-1){b.entry_page_subcategory="Shop: Checkout-Confirmation";}
else if(surl.search("checkout/rx/rx_confirm_order.jsp")!=-1){b.entry_page_subcategory="Pharmacy: Checkout-Confirmation";}
else if(surl.search("checkout/fs")!=-1){b.entry_page_subcategory="Shop: Viewed Cart";}
else if(surl.search("checkout/rx")!=-1){b.entry_page_subcategory="Pharmacy: Viewed Cart";}}
else if(surl.search("cvs.com/promo")!=-1||surl.search("cvs.com/bucksarehere/")!=-1||surl.search("cvs.com/doublerewards/")!=-1)
{b.entry_page_category="Content: Promo";}
else if(surl.search("cvs.com/deals")!=-1)
{b.entry_page_category="Content: Deals";}
else
{b.entry_page_category="Content: Others";}}}catch(e){}},function(a,b){try{document.cookie="prev_state_logged_in="+b['state_logged_in']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.prev_state_logged_in']=b['state_logged_in'];}catch(e){utag.DB(e)}},function(a,b){if(document.URL.indexOf("weeklyad")>=0){jQuery("#sCategoryBrowseFilter").change(function(){var str="";$("select option:selected").each(function(){str=$(this).children().text()+" ";});if(str.indexOf('All Categories')>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/All Categories")}
else if(str.indexOf('Beauty')>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/Beauty")}
else if(str.indexOf("Grocery")>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/Grocery")}
else if(str.indexOf("Health & Baby")>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/Health & Baby")}
else if(str.indexOf("Household")>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/Household")}
else if(str.indexOf("Personal Care")>-1)
{versaTagObj.generateRequest("https://www.cvs.com/weeklyad/browse/browse-home.jsp#Browse/Personal Care")}});}},function(a,b){try{if(1){try{b['random_number']=Math.floor(Math.random()*(1000000-(10000+1))+(10000+1));}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{var flag=b.state_authentication;if(flag=="true"||flag.search("true")!=-1)
{b.authStatus="1";}
else if(flag=="false"||flag.search("false")!=-1)
{b.authStatus="0";}}
catch(e){}},function(a,b){try{var flag=b.state_extracare_link;if(flag=="true"||flag.search("true")!=-1)
{b.ExtraCare="YES";}
else if(flag=="false"||flag.search("false")!=-1)
{b.ExtraCare="NO";}}
catch(e){}},function(a,b){try{if((b['dom.url'].toString().toLowerCase().indexOf('/account/rx/rx-acc-combined-signup.jsp'.toLowerCase())>-1&&b['dom.url'].toString().toLowerCase().indexOf('/account/creation'.toLowerCase())<0)){b['combined_auth_flag']='1';b['page_name']='RX: AUTHENTICATION: COMBINED: REGISTRATION';b['page_category']='RX';b['scenario_name']='Registration';b['scenario_step_number']='1'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('/account/rx/locate-rx-record.jsp'.toLowerCase())>-1){b['combined_auth_flag']='1';b['page_name']='RX: AUTHENTICATION: COMBINED: ENTER INFO';b['page_category']='RX';b['scenario_name']='Registration;AddRXManagementMainFlow;AddRXManagementPIFlow';b['scenario_step_number']='2;1;1'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('/account/rx/rx-personal-security-verify.jsp'.toLowerCase())>-1){b['combined_auth_flag']='1';b['page_name']='RX: AUTHENTICATION: COMBINED: LEXIS NEXUS';b['page_category']='RX';b['scenario_name']='AddRXManagementMainFlow';b['scenario_step_number']='2;2'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('/account/rx/rx-combined-acc-success.jsp'.toLowerCase())>-1){b['combined_auth_flag']='1';b['page_name']='RX: AUTHENTICATION: COMBINED: SUCCESS';b['page_category']='RX';b['scenario_name']='AddRXManagementMainFlow';b['scenario_step_number']='3;3'}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['server_timestamp']!='undefined'&&typeof b['server_timestamp']!='undefined'&&b['server_timestamp']!='')){try{b['server_timestamp_date']=b.server_timestamp.split('-')[0].split(':')[1]+"/"+b.server_timestamp.split('-')[0].split(':')[2]+"/"+b.server_timestamp.split('-')[0].split(':')[0];}catch(e){};try{b['server_timestamp_time']=b.server_timestamp.split('-')[1];}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['order_id']!='undefined'&&typeof b['order_id']!='undefined'&&b['order_id']!=''&&typeof b['server_timestamp']!='undefined'&&typeof b['server_timestamp']!='undefined'&&b['server_timestamp']!='')){b['order_date']=b['server_timestamp_date'];b['order_time']=b['server_timestamp_time']}}catch(e){utag.DB(e)}},function(a,b){try{if((b['page_category'].toString().toLowerCase().indexOf('PHARMACY'.toLowerCase())>-1&&typeof b['rx_order_id']!='undefined'&&b['rx_order_id']!=''&&typeof b['rx_order_id']!='undefined'&&typeof b['order_id']!='undefined'&&b['order_id']!=''&&typeof b['order_id']!='undefined')){b['rx_order_id']='99999999';b['wt_refill_number']='1'}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['script_count']!='undefined'&&typeof b['script_count']!='undefined'&&b['script_count']!=''&&parseFloat(b['script_count'])>=parseFloat(1))){b['wt_refill_number']=b['script_count']}}catch(e){utag.DB(e)}},function(a,b){try{if((b['page_category'].toString().toLowerCase().indexOf('SHOP'.toLowerCase())>-1&&typeof b['order_id']!='undefined'&&typeof b['order_id']!='undefined'&&b['order_id']!='')){b['fs_order_id']='99999999'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['page_name'].toString().toLowerCase().indexOf('PRODUCT:'.toLowerCase())>-1&&typeof b['product_sku_id']!='undefined'&&b['product_sku_id']!=''&&typeof b['product_price']!='undefined'&&b['product_price']!='')){b['wt_transaction_type']='v'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('/pharmacy/manage/tie-personal-rx.jsp'.toLowerCase())>-1){b['scenario_step_number']='1;1'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('/pharmacy/manage/tie-primary-rx-choicept-verify.jsp'.toLowerCase())>-1){b['scenario_step_number']='2;2'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.url'].toString().toLowerCase().indexOf('/pharmacy/manage/tie-primary-rx-success.jsp'.toLowerCase())>-1&&b['dom.referrer'].toString().toLowerCase().indexOf('/pharmacy/manage/tie-primary-rx-choicept-verify.jsp'.toLowerCase())>-1)){b['scenario_step_number']='3;3'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['page_name'].toString().toLowerCase().indexOf('shop: checkout: confirmation page'.toLowerCase())>-1&&typeof b['fs_order_id']!='undefined'&&typeof b['fs_order_id']!='undefined'&&b['fs_order_id']!='')){b['fs_order_product_subtotal']=b['product_subtotal']}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_name'].toString().toLowerCase().indexOf('CREATE ACCOUNT: SIGNUP'.toLowerCase())>-1){b['scenario_name']='Registration';b['scenario_step_number']='1'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['page_name'].toString().toLowerCase().indexOf('ACCOUNT: CREATE ACCOUNT: SUCCESS'.toLowerCase())>-1&&b['dom.referrer'].toString().toLowerCase().indexOf('/account/creation'.toLowerCase())<0)||(b['page_name'].toString().toLowerCase().indexOf('RX:Account verification Page'.toLowerCase())>-1&&b['page_category'].toString().toLowerCase().indexOf('ACCOUNT'.toLowerCase())<0&&b['dom.referrer'].toString().toLowerCase().indexOf('/account/creation'.toLowerCase())<0)){b['scenario_name']='Registration';b['scenario_step_number']='2'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_name'].toString().toLowerCase().indexOf('SHOP: CHECKOUT: SHIPPING'.toLowerCase())>-1){b['scenario_name']='Checkout Process;ShoppingCart';b['scenario_step_number']='1;3'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_name'].toString().toLowerCase().indexOf('SHOP: CHECKOUT: BILLING'.toLowerCase())>-1){b['scenario_name']='Checkout Process';b['scenario_step_number']='2'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_name'].toString().toLowerCase().indexOf('SHOP: CHECKOUT: VERIFY ORDER'.toLowerCase())>-1){b['scenario_name']='Checkout Process;ShoppingCart';b['scenario_step_number']='3;3'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_name'].toString().toLowerCase().indexOf('SHOP: CHECKOUT: CONFIRMED ORDER'.toLowerCase())>-1){b['scenario_name']='Checkout Process;ShoppingCart';b['scenario_step_number']='4;4'}}catch(e){utag.DB(e)}},function(a,b){try{if(/^off/i.test(b['rxdash_textalerts_flag'])){b['primary_rxdash_textalerts_off']='1';b['primary_rxdash_textalerts_on']='0'}}catch(e){utag.DB(e)}},function(a,b){try{if(/^ON/i.test(b['rxdash_textalerts_flag'])){b['primary_rxdash_textalerts_on']='1';b['primary_rxdash_textalerts_off']='0'}}catch(e){utag.DB(e)}},function(a,b){try{var textalerts_flag_array=b.rxdash_textalerts_flag.split(';');b.caregiver_rxdash_textalerts_on=0;b.caregiver_rxdash_textalerts_off=0;for(var i=1;i<textalerts_flag_array.length;i++){if(textalerts_flag_array[i].toLowerCase()=="on"){b.caregiver_rxdash_textalerts_on++;}else if(textalerts_flag_array[i].toLowerCase()=="off"){b.caregiver_rxdash_textalerts_off++;}}}catch(e){}},function(a,b){try{var refillreminders_flag_array=b.rxdash_refillreminders_flag.split(';');b.caregiver_rxdash_refillreminders_on=0;b.caregiver_rxdash_refillreminders_off=0;for(var i=1;i<refillreminders_flag_array.length;i++){if(refillreminders_flag_array[i].toLowerCase()=="on"){b.caregiver_rxdash_refillreminders_on++;}else if(refillreminders_flag_array[i].toLowerCase()=="off"){b.caregiver_rxdash_refillreminders_off++;}}}catch(e){}},function(a,b){try{if(/^off/i.test(b['rxdash_refillreminders_flag'])){b['primary_rxdash_refillreminders_off']='1';b['primary_rxdash_refillreminders_on']='0'}}catch(e){utag.DB(e)}},function(a,b){try{if(/^ON/i.test(b['rxdash_refillreminders_flag'])){b['primary_rxdash_refillreminders_on']='1';b['primary_rxdash_refillreminders_off']='0'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().toLowerCase().indexOf('http://m.cvs.com'.toLowerCase())>-1||b['dom.url'].toString().toLowerCase().indexOf('https://m.cvs.com'.toLowerCase())>-1){b['webtrends_dcsid']='dcstba2wquz5bd2i2bbvq2100_1o8b';b['app_proxy_location']='CVS MOBILE WEB'}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['ExtracareCookieOptinSuccess']!='undefined'&&b['ExtracareCookieOptinSuccess']!=''&&b['ExtracareCookieOptinSuccess'].toString().toLowerCase()=='true'.toLowerCase())){b['ExtracareCookieLocation']=b['dom.pathname']}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['qp.utm_source']!='undefined'){utag.loader.SC('utag_main',{'utm_source':b['qp.utm_source']+';exp-7d'});b['cp.utag_main_utm_source']=b['qp.utm_source'];}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['cp.icet-qa4']!='undefined'&&b['cp.icet-qa4'].toString().toLowerCase()=='off'.toLowerCase())||(typeof b['cp.icet']!='undefined'&&b['cp.icet'].toString().toLowerCase()=='off'.toLowerCase())){b['site_name']='ICET-B'}}catch(e){utag.DB(e)}},function(a,b){b.device_type="other";try{var platform_check=navigator.userAgent;if(platform_check.toLowerCase().search("android")!==-1){if(platform_check.toLowerCase().search("cvs_android_app")===-1){b.device_type="android";}
else{b.device_type="cvs_android_app";}}
else if(platform_check.toLowerCase().search("iphone")!==-1){b.device_type="iphone";}
else if(platform_check.toLowerCase().search("ipad")!==-1){b.device_type="ipad";}
else if(platform_check.toLowerCase().search("ipod touch")!==-1){b.device_type="ipod touch";}
else if(platform_check.toLowerCase().search("windows phone")!==-1){b.device_type="windows phone";}}catch(e){}},function(a,b){try{if(1){if(typeof b!=='undefined'){b.load_rule='';if(typeof b.device_type!='undefined'){if(b.device_type=="other"){if(window.location.pathname.toLowerCase().indexOf('/shop')==0||window.location.pathname.toLowerCase().indexOf('/search')==0||window.location.pathname.toLowerCase().indexOf('/promo/responsivepromolandingtemplate')>-1){b.load_rule='180';}
else if(window.location.pathname.toLowerCase().indexOf('/extracare')>-1||window.location.pathname.toLowerCase().indexOf('/webcontent/components/drstc/src/dist/')>-1||window.location.pathname.toLowerCase().indexOf('/webcontent/components/sendtocard_hero/src/dist/')>-1||window.location.pathname.toLowerCase().indexOf('/extracare-cvs/')>-1){b.load_rule='D07';}
else if(window.location.pathname.toLowerCase().indexOf('/stores')>-1||window.location.pathname.toLowerCase().indexOf('/store-locator')>-1){b.load_rule='D03';}
else if(window.location.pathname.toLowerCase().indexOf('/weeklyad')>-1){b.load_rule='D09';}
else if(window.location.pathname.toLowerCase().indexOf('/pharmacy')>-1){b.load_rule='D04';}
else if(window.location.pathname.toLowerCase().indexOf('/drug')==0){b.load_rule='190';}}
else if(b.device_type=="android"){if(window.location.pathname.toLowerCase().indexOf('/shop')==0||window.location.pathname.toLowerCase().indexOf('/search')==0||window.location.pathname.toLowerCase().indexOf('/promo/responsivepromolandingtemplate')>-1){b.load_rule='181';}
else if(window.location.pathname.toLowerCase().indexOf('/extracare')>-1||window.location.pathname.toLowerCase().indexOf('/webcontent/components/drstc/src/dist/')>-1||window.location.pathname.toLowerCase().indexOf('/webcontent/components/sendtocard_hero/src/dist/')>-1||window.location.pathname.toLowerCase().indexOf('/extracare-cvs/')>-1){b.load_rule='D05';}
else if(window.location.pathname.toLowerCase().indexOf('/stores')>-1||window.location.pathname.toLowerCase().indexOf('/store-locator')>-1){b.load_rule='D01';}
else if(window.location.pathname.toLowerCase().indexOf('/weeklyad')>-1){b.load_rule='D02';}
else if(window.location.pathname.toLowerCase().indexOf('/pharmacy')>-1){b.load_rule='D06';}
else if(window.location.pathname.toLowerCase().indexOf('/drug')==0){b.load_rule='191';}}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['field_errors']!='undefined'&&typeof b['field_errors']!='undefined'&&b['field_errors']=='')||(typeof b['field_errors']!='undefined'&&b['field_errors']=='[]')||typeof b['field_errors']=='undefined'){b['event_success_flag']='1'}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['field_errors']!='undefined'&&typeof b['field_errors']!='undefined'&&b['field_errors']!=''&&b['field_errors'].toString().toLowerCase()!='[]'.toLowerCase())){b['event_success_flag']='0'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.pathname'].toString().toLowerCase().indexOf('/checkout/fs/orderConfirmation.jsp'.toLowerCase())>-1&&typeof b['order_id']!='undefined'&&b['order_id']!='')){b['wt_transaction_type']='p'}}catch(e){utag.DB(e)}},function(a,b){try{if(utag_data.order_total&&utag_data.shipping_total&&utag_data.order_tax_amount){utag_data.product_subtotal=utag_data.order_total-utag_data.shipping_total-utag_data.order_tax_amount;}}catch(e){}},function(a,b){try{if((b['dom.pathname'].toString().toLowerCase().indexOf('-prodid-'.toLowerCase())>-1&&b['balance_on_hand_stock_level'].toString().toLowerCase()=='OUT OF STOCK'.toLowerCase())){try{b['balance_on_hand_stock_level']=($('.shippingType:visible').html().indexOf('Available in')>-1?'IN STORE ONLY':b.balance_on_hand_stock_level);}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(window.location.pathname.toLowerCase().indexOf('/shop/')>-1||window.location.pathname.toLowerCase().indexOf('/search/')>-1||window.location.pathname.toLowerCase().indexOf('/checkout/fs/orderconfirmation.jsp')>-1){if(window.location.href.indexOf('www.cvs.com')>-1||window.location.href.indexOf('m.cvs.com')>-1){var gbTracker=new GbTracker('cvshealth','Production');}
else{var gbTracker=new GbTracker('cvshealth','Staging');}
gbTracker.autoSetVisitor();var txtBeacon,objBeacon,txtPid;if(b.page_name.toString().indexOf('SEARCH:')==0&&typeof b.search_term!='undefined'&&b.search_term!=''){gbTracker.sendAutoSearchEvent({search:{id:'e30a4611-64b0-49a1-ad56-ab8fa2ffcc10',origin:{recommendations:false,navigation:false,dym:false,sayt:false,search:true}},metadata:[{source:'cvs'}]});}
else if(b.page_name.toString().indexOf('SHOP: PRODUCT:')==0&&typeof b.product_sku_id!='undefined'&&b.product_sku_id!=''&&typeof b.product_name!='undefined'&&b.product_name!=''&&typeof b.product_price!='undefined'&&b.productprice!=''){if(window.location.pathname.indexOf('-prodid-')>-1){txtPid=window.location.pathname.substr(window.location.pathname.indexOf('-prodid-')+8);gbTracker.sendViewProductEvent({product:{productId:txtPid,title:b.product_name,price:b.product_price,sku:b.product_sku_id}});}}
else if(b.page_name.toString().indexOf('SHOP: CHECKOUT: CONFIRMATION PAGE')==0&&typeof b.order_total!='undefined'&&b.order_total!=''){constructOrder();gbTracker.sendOrderEvent(objBeacon);}}
function constructOrder(){var qty;txtBeacon='{"cart":{"totalPrice":"'+b.order_total+'","items":[';for(i=0;i<b.product_sku_id.length;i++){qty=((typeof b.product_quantity[i]!='undefined')?b.product_quantity[i]:'1');txtBeacon+='{"productId":"n/a'+
'","title":"'+b.product_name[i]+
'","price":"'+b.product_price[i]+
'","quantity":"'+qty+
'","sku":"'+b.product_sku_id[i]+
'","collection":"default"}';txtBeacon+=((b.product_sku_id.length>1&&i<(b.product_sku_id.length-1))?',':'');}
txtBeacon+=']}}';objBeacon=JSON.parse(txtBeacon);}
}}catch(e){utag.DB(e)}},function(a,b){try{var w=b.search_results_drug;var x=b.search_results_help;var y=b.search_results_products;var z=b.search_results_resources;var max=Math.max(w,x,y,z);if(max==w)
{b.SearchTermTab=b.search_term+",drug";}
else if(max==x)
{b.SearchTermTab=b.search_term+",help";}
else if(max==y)
{b.SearchTermTab=b.search_term+",product";}
else if(max==z)
{b.SearchTermTab=b.search_term+",health";}}
catch(e){}},function(a,b){try{if((b['page_name'].toString().toLowerCase().indexOf('search: no search results'.toLowerCase())>-1&&typeof b['search_term']!='undefined'&&typeof b['search_term']!='undefined'&&b['search_term']!='')){b['no_search_term']=b['search_term'];b['SearchTermTab']='no results';b['total_results']='0'}}catch(e){utag.DB(e)}},function(a,b){try{if((document.location.pathname.indexOf('/shop')==0||document.location.pathname.indexOf('/search')==0)&&document.cookie.indexOf('gbion=true;')>-1){if(typeof b!=='undefined'){(window.document.domain.indexOf('www.')>-1||window.document.domain.indexOf('m.')>-1)?(window.document.domain.indexOf('-qa')>-1?b.environment='qa':b.environment='prod'):b.environment='dev';if((window.location.pathname.indexOf('/search/drug')==0)&&(typeof b.search_results_products!=='undefined')){b.search_results_drug=b.search_results_products;b.search_results_products=0;}
if(typeof b.page_name!=='undefined'&&b.page_name.indexOf('pdp:')==0){b.page_name='shop:'+b.page_name.slice(4);}
if(typeof b.page_name!=='undefined'&&b.page_name.indexOf('shop: c')==0){var arrsub=b.page_name.split(': ');b.page_sub_category=arrsub[2];}
if(typeof b.filter_sale!=='undefined'){b.filter_sale=b.filter_sale.replace(/[,%]/g,"");}
if(typeof b.filter_!=='undefined'){b.page_sub_category=b.page_sub_category.replace(/::/g,":");}
if(typeof b.search_type!=='undefined'&&b.search_type=='Auto Search: Category'){b.search_type='Auto Search';}
if(typeof b.events!=='undefined'&&b.events=='scAdd'){b.wt_transaction_type='a';}
if(typeof b.product_free_shipping_eligible!=='undefined'){b.product_free_shipping_eligible==true?b.product_free_shipping_eligible='TRUE':b.product_free_shipping_eligible='FALSE';}
if(typeof b.bopus_eligible_product_flag!=='undefined'){b.bopus_eligible_product_flag==true?b.bopus_eligible_product_flag='true':b.bopus_eligible_product_flag='false';}
if(typeof b.page_name!=='undefined'&&b.page_name.indexOf('shop: brand shop:')==0){b.page_sub_category='brand shops';b.search_results_drug='';b.search_results_help='';b.search_results_products='';b.search_results_resources='';b.search_type='';b.total_results='';}}}}catch(e){}},function(a,b){try{if(1){try{var elems;if(window.jQuery){$("[id^='utag_'],[id^='tealium_']").remove();}else{elems=document.querySelectorAll("[id^='utag_'],[id^='tealium_']");if(elems){for(var i=0;i<elems.length;i++){elems[i].parentNode.removeChild(elems[i]);}}}}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['cp.cj_ev']=='undefined'){document.cookie="cj_ev="+b['qp.cjevent']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(3*86400000));return d.toGMTString()})()+"";b['cp.cj_ev']=b['qp.cjevent'];}}catch(e){utag.DB(e)}}];utag.handler.cfg_extend=[{"alr":1,"bwq":0,"id":"109","blr":0,"end":0},{"alr":1,"bwq":0,"id":"55","blr":0,"end":0},{"alr":1,"bwq":0,"id":"59","blr":0,"end":0},{"alr":1,"bwq":0,"id":"72","blr":0,"end":0},{"alr":1,"bwq":0,"id":"73","blr":0,"end":0},{"alr":1,"bwq":0,"id":"85","blr":0,"end":0},{"alr":1,"bwq":0,"id":"86","blr":0,"end":0},{"alr":1,"bwq":0,"id":"90","blr":0,"end":0},{"alr":1,"bwq":0,"id":"91","blr":0,"end":0},{"alr":1,"bwq":0,"id":"118","blr":0,"end":0},{"alr":1,"bwq":0,"id":"92","blr":0,"end":0},{"alr":1,"bwq":0,"id":"102","blr":0,"end":0},{"alr":1,"bwq":0,"id":"103","blr":0,"end":0},{"alr":1,"bwq":0,"id":"104","blr":0,"end":0},{"alr":1,"bwq":0,"id":"106","blr":0,"end":0},{"alr":1,"bwq":0,"id":"105","blr":0,"end":0},{"alr":1,"bwq":0,"id":"113","blr":0,"end":0},{"alr":1,"bwq":0,"id":"115","blr":0,"end":0},{"alr":1,"bwq":0,"id":"114","blr":0,"end":0},{"alr":1,"bwq":0,"id":"116","blr":0,"end":0},{"alr":1,"bwq":0,"id":"117","blr":0,"end":0},{"alr":1,"bwq":0,"id":"119","blr":0,"end":0},{"alr":1,"bwq":0,"id":"120","blr":0,"end":0},{"alr":1,"bwq":0,"id":"121","blr":0,"end":0},{"alr":1,"bwq":0,"id":"122","blr":0,"end":0},{"alr":1,"bwq":0,"id":"123","blr":0,"end":0},{"alr":1,"bwq":0,"id":"124","blr":0,"end":0},{"alr":1,"bwq":0,"id":"129","blr":0,"end":0},{"alr":1,"bwq":0,"id":"130","blr":0,"end":0},{"alr":1,"bwq":0,"id":"131","blr":0,"end":0},{"alr":1,"bwq":0,"id":"141","blr":0,"end":0},{"alr":1,"bwq":0,"id":"142","blr":0,"end":0},{"alr":1,"bwq":0,"id":"143","blr":0,"end":0},{"alr":1,"bwq":0,"id":"157","blr":0,"end":0},{"alr":1,"bwq":0,"id":"163","blr":0,"end":0},{"alr":1,"bwq":0,"id":"185","blr":0,"end":0},{"alr":1,"bwq":0,"id":"190","blr":0,"end":0},{"alr":0,"bwq":0,"id":"281","blr":1,"end":0},{"alr":1,"bwq":0,"id":"432","blr":0,"end":0},{"alr":1,"bwq":0,"id":"275","blr":0,"end":0},{"alr":1,"bwq":0,"id":"276","blr":0,"end":0},{"alr":1,"bwq":0,"id":"200","blr":0,"end":0},{"alr":1,"bwq":0,"id":"108","blr":0,"end":0},{"alr":1,"bwq":0,"id":"430","blr":0,"end":0},{"alr":1,"bwq":0,"id":"424","blr":0,"end":0},{"alr":1,"bwq":0,"id":"84","blr":0,"end":0},{"alr":1,"bwq":0,"id":"128","blr":0,"end":0},{"alr":1,"bwq":0,"id":"463","blr":0,"end":0},{"alr":0,"bwq":0,"id":"458","blr":1,"end":0},{"alr":0,"bwq":0,"id":"526","blr":0,"end":1}];utag.loader.initcfg=function(){utag.loader.cfg={"254":{load:(utag.cond[73]&&utag.cond[109]),send:1,v:201806071303,wait:0,tid:13084},"298":{load:4,send:1,v:201807111355,wait:0,tid:20010},"227":{load:1,send:1,v:201808271418,wait:1,tid:19063},"304":{load:1,send:1,v:201808082044,wait:1,tid:20010},"290":{load:utag.cond[132],send:1,v:201807101510,wait:1,tid:6035},"165":{load:utag.cond[55],send:1,v:201707071723,wait:1,tid:20011},"217":{load:utag.cond[102],send:1,v:201702091841,wait:1,tid:6026},"220":{load:utag.cond[87],send:1,v:201611161419,wait:1,tid:6026},"213":{load:utag.cond[82],send:1,v:201802261500,wait:1,tid:20085},"289":{load:utag.cond[16],send:1,v:201802261500,wait:1,tid:20011},"251":{load:utag.cond[103],send:1,v:201710261426,wait:1,tid:20067},"305":{load:utag.cond[16],send:1,v:201808231548,wait:1,tid:3004},"257":{load:utag.cond[107],send:1,v:201704062020,wait:1,tid:20010,src:"//cdn.groupbycloud.com/dist/gb-tracker-client-3.min.js"},"284":{load:1,send:1,v:201808291750,wait:1,tid:4049},"274":{load:utag.cond[120],send:1,v:201801251830,wait:1,tid:18001}};utag.loader.cfgsort=["254","298","227","304","290","165","217","220","213","289","251","305","257","284","274"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(var i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[i]=utag_cfg_ovrd[i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1&&b.s2s!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{if(1){if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[28]=='undefined'){utag.runonce[28]=1;jQuery('#pickupDate.nobold.mr20.drop_int').bind('change',function(e){dcsMultiTrack('DCSext.cvs_event_name','Rx Select Location: Date Change','DCSext.cvs_event_category','Rx Select Location','WT.dl','70');});}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[29]=='undefined'){utag.runonce[29]=1;jQuery('#pickupTime.nobold.drop_int').bind('change',function(e){dcsMultiTrack('DCSext.cvs_event_name','Rx Select Location: Time Change','DCSext.cvs_event_category','Rx Select Location','WT.dl','70');});}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[30]=='undefined'){utag.runonce[30]=1;jQuery('#Image31.btn-gray-med.cvsbtn span.center').bind('click',function(e){dcsMultiTrack('DCSext.cvs_event_name','Rx Select Location: Change Store Button Click','DCSext.cvs_event_category','Rx Select Location','WT.dl','70');})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[31]=='undefined'){utag.runonce[31]=1;jQuery('#Image001.btn-gray-med.cvsbtn span.center').bind('click',function(e){dcsMultiTrack('DCSext.cvs_event_name','Rx Select Location: Ship Address Button Click','DCSext.cvs_event_category','Rx Select Location','WT.dl','70');})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[43]=='undefined'){utag.runonce[43]=1;jQuery('#defaultblock > div > a:eq(0), #one.content > div > a:eq(0), #three.content > div > a:eq(1), #four.content > div > a:eq(1)').bind('click',function(e){if(document.URL.indexOf("specialty")>=0&&document.URL.indexOf("specialtyphysician")==-1){versaTagObj.generateRequest("http://www.cvs.com/specialty/tab_localconvenience.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[40]=='undefined'){utag.runonce[40]=1;jQuery('#defaultblock > div > a:eq(1), #one.content > div > a:eq(1), #three.content > div > a:eq(2), #four.content > div > a:eq(2)').bind('click',function(e){if(document.URL.indexOf("specialty")>=0&&document.URL.indexOf("specialtyphysician")==-1){versaTagObj.generateRequest("http://www.cvs.com/specialty/tab_personalizedcare.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[44]=='undefined'){utag.runonce[44]=1;jQuery('#defaultblock > div > a:eq(2), #one.content > div > a:eq(2), #three.content > div > a:eq(3), #four.content > div > a:eq(3)').bind('click',function(e){if(document.URL.indexOf("specialty")>=0&&document.URL.indexOf("specialtyphysician")==-1){versaTagObj.generateRequest("http://www.cvs.com/specialty/tab_insuranceguidance.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[45]=='undefined'){utag.runonce[45]=1;jQuery('#defaultblock > div > a:eq(3), #one.content > div > a:eq(3), #three.content > div > a:eq(4), #four.content > div > a:eq(4)').bind('click',function(e){if(document.URL.indexOf("specialty")>=0&&document.URL.indexOf("specialtyphysician")==-1){versaTagObj.generateRequest("http://www.cvs.com/specialty/tab_supportedconditions.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[46]=='undefined'){utag.runonce[46]=1;jQuery('#defaultblock > div > a:eq(0), #one.content > div > a:eq(0), #three.content > div > a:eq(1), #four.content > div > a:eq(1)').bind('click',function(e){if(document.URL.indexOf("specialtyphysician")>=0){versaTagObj.generateRequest("http://www.cvs.com/specialtyphys/tab_commitment.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[47]=='undefined'){utag.runonce[47]=1;jQuery('#defaultblock > div > a:eq(1), #one.content > div > a:eq(1), #three.content > div > a:eq(2), #four.content > div > a:eq(2)').bind('click',function(e){if(document.URL.indexOf("specialtyphysician")>=0){versaTagObj.generateRequest("http://www.cvs.com/specialtyphys/tab_patient.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[48]=='undefined'){utag.runonce[48]=1;jQuery('#defaultblock > div > a:eq(2), #one.content > div > a:eq(2), #three.content > div > a:eq(3), #four.content > div > a:eq(3)').bind('click',function(e){if(document.URL.indexOf("specialtyphysician")>=0){versaTagObj.generateRequest("http://www.cvs.com/specialtyphys/tab_local.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[49]=='undefined'){utag.runonce[49]=1;jQuery('#defaultblock > div > a:eq(3), #one.content > div > a:eq(3), #three.content > div > a:eq(4), #four.content > div > a:eq(4)').bind('click',function(e){if(document.URL.indexOf("specialtyphysician")>=0){versaTagObj.generateRequest("http://www.cvs.com/specialtyphys/tab_supported.html")};})}}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[100]=='undefined'){utag.runonce[100]=1;jQuery('a[data-url*="flydown"]').bind('mousedown',function(e){utag_data.flydown_cat=jQuery(this).attr("data-url").match(/\/flydowns\/([^\/]*)\//i)[1];utag_data.flydown_link=jQuery(this).attr("data-url").match(/\/([^\/]*).html/i)[1];utag_data.event_name=utag_data.flydown_cat+" | "+utag_data.flydown_link;utag_data.event_category="Flydown";utag.link({flydown_cat:utag_data.flydown_cat,flydown_link:utag_data.flydown_link,event_name:utag_data.event_name,event_category:utag_data.event_category});});}}}catch(e){utag.DB(e)};try{jQuery('button#create').live('mousedown',function(){utag.link({event_name:"Login: Start",event_category:"Login"});document.cookie="tealium_login_temp=1";});if((utag.data['cp.tealium_login_temp']=="1")&&(utag.data['state_logged_in']=="LOGGEDIN"))
{utag.link({event_name:"Login: Success",event_category:"Login"});document.cookie="tealium_login_temp=0";}}catch(e){utag.DB(e)};try{if(utag.data['dom.url'].indexOf('/browse/browse-home.jsp')>0||utag.data['dom.url'].indexOf('/access-path/store-locator.jsp')>0){var checkSRExist=setInterval(function(){if(typeof versaTagObj!="undefined"){if(utag.data['cp.utag_main_vt_unique']!=""&&typeof utag.data['cp.utag_main_vt_unique']!="undefined"){utag.link({versa_dummy_url:utag.data['dom.url']+'_SubsequentView'});}
else{utag.link({versa_dummy_url:utag.data['dom.url']+'_InitialView'});utag.loader.SC('utag_main',{'vt_unique':'exposed'+';exp-30000d'});}
clearInterval(checkSRExist);}},250);}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[140]=='undefined'){utag.runonce[140]=1;jQuery('#boh.overlay').bind('mousedown',function(e){utag.link({"event_category":'Front Store',"event_name":'Balance On Hand: Click'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.url'].indexOf('cvs.com/content/optical')>-1){jQuery('#promocontent div.floatLeft div.optical-locations-header p a.promoBold.promoTextred').mousedown(function(){utag.link({atlas_event:'optometry_phonenumber'})})
jQuery('#locations.pad-section div.container div.row div.col-sm-18.col-xs-24 div.border-bottom.col-sm-8.col-xs-24 div.hidden-xs p a.fontsize14.caret-red-14').mousedown(function(){utag.link({atlas_event:'optometry_makeappointment'})})}
if(utag.data['dom.url'].indexOf('cvs.com/content/hearingcenter')>-1){jQuery('#main div.promoWrapper div.promocontentBlue.promoTitlecontainer div.promoBodycopythin.promoBodycopy16Blue p span.promoBold a').mousedown(function(){utag.link({atlas_event:'audiology_phonenumber'})})
jQuery('#promoContainer.promoRedContainer a').mousedown(function(){utag.link({atlas_event:'audiology_phonenumber'})})}
if(utag.data['dom.url'].indexOf('cvs.com/mobile/cvs-express')>-1){jQuery('div.cvs-express-app-text a img[src*=apple]').mousedown(function(){utag.link({atlas_event:'itunes_app'})})
jQuery('div.cvs-express-app-text a img[src*=google]').mousedown(function(){utag.link({atlas_event:'android_app'})})}
if(utag.data['dom.url'].indexOf('cvs.com/content/transfer')>-1){jQuery('#dMain div.transfer-hero div.transfer-hero-text a.ptxt-white.pbtn-red.pbtn-large').mousedown(function(){utag.link({atlas_event:'transfer_instore'})})
jQuery('#dMain div.transfer-banner1 div.promoTextblack.transfer-banner1-box1 div.promoTextblack.transfer-support-text a.fontsize16.caret-white-hlightgray-16').mousedown(function(){utag.link({atlas_event:'transfer_instore'})})
jQuery('#dMain div.transfer-hero div.transfer-hero-text a.ptxt-red.pbtn-white-border-red.pbtn-large-border').mousedown(function(){utag.link({atlas_event:'transfer_online'})})
jQuery('#dMain div.transfer-banner1 div.promoTextblack.transfer-banner1-box2 div.promoTextblack.transfer-support-text a.fontsize16.caret-white-hlightgray-16').mousedown(function(){utag.link({atlas_event:'transfer_online'})})}
if(utag.data['dom.url'].indexOf('cvs.com/content/optical')>-1){jQuery('#promocontent div.floatLeft div.optical-locations-header p a.promoBold.promoTextred').mousedown(function(){utag.link({atlas_event:'optometry_phonenumber'})})
jQuery('#locations.pad-section div.container div.row div.col-sm-18.col-xs-24 div.border-bottom.col-sm-8.col-xs-24 div.hidden-xs p a.fontsize14.caret-red-14').mousedown(function(){utag.link({atlas_event:'optometry_makeappointment'})})}
if(utag.data['dom.url'].indexOf('cvs.com/buy-sell-pharmacy')>-1){jQuery('#container section.get-in-touch div.contact-form form input.submit').mousedown(function(){utag.link({atlas_event:'Pharmacy_FormFill',event_name:'buy_sell_form_send'})})}}catch(e){utag.DB(e)};try{if(1){if(typeof utag.runonce[270]=='undefined'){utag.runonce[270]=1;jQuery('#code-verify div.row div.pad-rd0.col-md-6.col-sm-8.col-xs-12 button.height-50px.width-100.white-col.font-16.red-bg.mar-b20.btn-default.btn.bdr-0.center').bind('click',function(e){utag.link({"event_name":'RX:Send Text To New',"event_category":'Text Message Auth',"page_name":'RX:Account verification Page'})})}}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};utag.jdh=function(h,i,j,k){h=utag.jdhc.length;if(h==0)window.clearInterval(utag.jdhi);else{for(i=0;i<h;i++){j=utag.jdhc[i];k=jQuery(j.i).is(":visible")?1:0;if(k!=j.s){if(j.e==(j.s=k))jQuery(j.i).trigger(j.e?"afterShow":"afterHide")}}}};utag.jdhi=window.setInterval(utag.jdh,250);utag.jdhc=[];if(utag.data['dom.pathname'].toString().toLowerCase()=='/weeklyad/browse/browse-home.jsp'.toLowerCase()){if(typeof utag.runonce[379]=='undefined'){utag.runonce[379]=1;jQuery(document.body).on('mousedown','a.btnECSendCard',function(e){utag.link({"event_category":'extracare',"event_name":'ec:send to card:my weekly ad'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname'].toString().toLowerCase().indexOf('/checkout/fs/shoppingcart_items.jsp'.toLowerCase())>-1){if(typeof utag.runonce[395]=='undefined'){utag.runonce[395]=1;jQuery(document.body).on('mousedown','#couponApply',function(e){utag.link({"event_name":$('#couponcode.couponcode_field').val(),"event_category":'Apply Coupon Code',"platform":utag.data['platform']})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname'].toString().toLowerCase().indexOf('/checkout/fs/checkout.jsp'.toLowerCase())>-1){if(typeof utag.runonce[401]=='undefined'){utag.runonce[401]=1;jQuery(document.body).on('focus','#inputSuccess2',function(e){utag.link({"customer_payment_type":(typeof $("#inputSuccess1.form-control.cc-field.visa").css("visibility")=="string")?"visa":((typeof $("#inputSuccess1.form-control.cc-field.masterCard").css("visibility")=="string")?"mastercard":((typeof $("#inputSuccess1.form-control.cc-field.discover").css("visibility")=="string")?"discover":((typeof $("#inputSuccess1.form-control.cc-field.americanExpress").css("visibility")=="string")?"americanexpress":((typeof $("#inputSuccess1.form-control.cc-field.dinersclub").css("visibility")=="string")?"dinersclub":((typeof $("#inputSuccess1.form-control.cc-field.maestro").css("visibility")=="string")?"maestro":((typeof $("#inputSuccess1.form-control.cc-field.laser").css("visibility")=="string")?"laser":((typeof $("#inputSuccess1.form-control.cc-field.jcb").css("visibility")=="string")?"jcb":((typeof $("#inputSuccess1.form-control.cc-field.unionpay").css("visibility")=="string")?"unionpay":"none")))))))),"event_name":'ReviewOrder:CreditCard:CardType',"event_category":utag.data['event_category']})});}}}catch(e){utag.DB(e)};try{if(utag.data['page_name'].toString().toLowerCase()=='promo: cvs mobile app: pharmacy'.toLowerCase()){if(typeof utag.runonce[471]=='undefined'){utag.runonce[471]=1;jQuery(document.body).on('mousedown','[alt="Download on the AppStore"]',function(e){utag.link({"flex1":'APP_DOWNLOAD_IPHONE',"event_name":'APP_DOWNLOAD_IPHONE'})});}}}catch(e){utag.DB(e)};try{if(utag.data['page_name'].toString().toLowerCase()=='promo: cvs mobile app: pharmacy'.toLowerCase()){if(typeof utag.runonce[470]=='undefined'){utag.runonce[470]=1;jQuery(document.body).on('mousedown','[alt="Get it on Google Play"]',function(e){utag.link({"flex1":'APP_DOWNLOAD_ANDROID',"event_name":'APP_DOWNLOAD_ANDROID'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[488]=='undefined'){utag.runonce[488]=1;jQuery('.nav-links a[href="#faqs"]').bind('mousedown',function(e){utag.link({"event_name":'fb_faq_click'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[489]=='undefined'){utag.runonce[489]=1;jQuery('.nav-links a[href="#why-sell"]').bind('mousedown',function(e){utag.link({"event_name":'fb_why_sell_click'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[487]=='undefined'){utag.runonce[487]=1;jQuery('#mapStateToRep button').bind('mousedown',function(e){utag.link({"event_name":'fb_state_search',"filebuys_state_searched":jQuery("#selectStates option:selected").text()})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[486]=='undefined'){utag.runonce[486]=1;jQuery('.contact-form input').bind('focus',function(e){utag.link({"event_name":'fb_form_interaction',"filebuys_form_field":this.id})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[485]=='undefined'){utag.runonce[485]=1;jQuery('.contact-form #pharmacy-name').bind('change',function(e){utag.link({"event_name":'fb_pharmacy_filled',"filebuys_pharmacy_name":jQuery(this).val()})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[483]=='undefined'){utag.runonce[483]=1;jQuery('#learn-more a').bind('mousedown',function(e){utag.link({"event_name":'fb_learn_more_click'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[484]=='undefined'){utag.runonce[484]=1;jQuery('a[href="#guidelines"]').bind('mousedown',function(e){utag.link({"event_name":'fb_guidelines_click'})});}}}catch(e){utag.DB(e)};try{if(utag.data['dom.pathname']=='/buy-sell-pharmacy/'){if(typeof utag.runonce[482]=='undefined'){utag.runonce[482]=1;jQuery('#faqs>ul>li:not(".active")>h3').bind('click',function(e){utag.link({"event_name":'fb_faq_expand',"filebuys_faq_text":jQuery(this).text()})})}}}catch(e){utag.DB(e)};try{try{if(window.location.href.indexOf("account/previous-purchases")>-1){$("#mp-addToBasketMainContainer.ng-scope div.row div.mp-addToBasketContainer.col-sm-15.col-xs-14 button.ng-scope.ng-binding.mp-addToBasketButton.btn").click(function(e){utag.link({wt_transaction_type:"a",product_quantity:"1",product_sku_id:angular.element($(this).parents('#mp-addToBasketMainContainer')).scope().prod.skuId,product_name:angular.element($(this).parents('#mp-addToBasketMainContainer')).scope().prod.productName});});}
function adobe_TrackAnchorLinks(e){try{if(e.target.tagName.toLowerCase()=='button'){if(e.target.type.toLowerCase()=='button'&&e.target.innerHTML.toLowerCase()=='post review'){var tempName=utag_data.page_name.toLowerCase();var nameStart1='shop: product:';var overallRating=$(".bv-submission-star-rating-control .bv-submission-star-rating-on").length;if(tempName.substring(0,nameStart1.length)==nameStart1&&overallRating>0){var tempPath1=document.location.pathname;var productIndex1=tempPath1.indexOf('prodid-');var tempLength='prodid-'.length;var productID=tempPath1.slice(productIndex1+tempLength);s.linkTrackVars='products,eVar74,eVar75,events';s.linkTrackEvents='event43';s.products=';'+productID+';;;;eVar71='+utag_data.product_sku_id;s.eVar74=$('#bv-textarea-field-reviewtext').val();s.eVar75=utag_data.product_review_count;s.events=s.apl(s.events,"event43",",",1);s.tl(this,'o','Custom: Review Submitted Successfully');}}}
if(e.target.tagName.toLowerCase()=='span'){if(e.target.innerText.toLowerCase().slice(0,3)=='yes'||e.target.innerText.toLowerCase().slice(0,2)=='no'){s.linkTrackVars='products,events';s.linkTrackEvents='event44';s.products='';s.events=s.apl(s.events,"event44",",",1);s.tl(this,'o','Custom: Feedback Submitted ');}}
if(e.target.tagName.toLowerCase()=='span'){if(e.target.innerText.toLowerCase()=='sign in'||e.target.className.toLowerCase()=='right'||e.target.className.toLowerCase()=='left'||e.target.className.toLowerCase()=='right-with-arrow'){if(e.target.parentElement.id=='create'||e.target.parentElement.id=='login'||e.target.parentElement.id=='loginAccount'){if($('#cvs-overlay').is(':visible')||utag_data.page_name.toLowerCase()=="shop: checkout: login"||utag_data.page_name.toLowerCase()=="account: login"||$('.modal.fade').is(':visible')){trackSignIn();}}}}
if(e.target.tagName.toLowerCase()=='button'){if(e.target.id=='login'||e.target.id=='create'){trackSignIn();}}
if(e.target.tagName.toLowerCase()=='button'||e.target.tagName.toLowerCase()=='a'){if(e.target.innerText.toLowerCase()=='sign in'){if($('.modal.fade').is(':visible')){s.linkTrackVars='pageName';s.pageName="ec: sign in modal";globalAdobeObject.setAdobePageName('adobePage');s.track();if(gECSignin==0){$(document).bind('keypress','#passwordPopup',function(e){if(e.keyCode==13&&e.target.id=='passwordPopup'){trackSignIn();}});gECSignin=gECSignin+1;}
gcntFormFieldFocus=0;}}}
if(e.target.tagName.toLowerCase()=='input'){if(document.activeElement.id=='loginPopup'||document.activeElement.id=='passwordPopup'){if(gcntFormFieldFocus==0){s.clearVars();s.linkTrackVars='eVar10,events';s.eVar10='Sign In Form';s.linkTrackEvents='event10';s.events=s.apl(s.events,"event10",",",1);s.tl(this,'o','Custom:Sign In Email Focus');gcntFormFieldFocus=gcntFormFieldFocus+1;}}}
if(e.target.tagName.toLowerCase()=='span'){if(e.target.innerText.toLowerCase()=='make this mycvs store'||e.target.className.toLowerCase()=='right'||e.target.className.toLowerCase()=='left'){if(e.target.parentElement.name=='makeCVSStore'){s.linkTrackVars='eVar12,events';s.eVar12='User set MyCVS';s.linkTrackEvents='event29';s.events=s.apl(s.events,"event29",",",1);s.tl(this,'o','Custom: Make this myCVS ');}}}
if(e.target.tagName.toLowerCase()=='input'){if(e.target.id=='labelInf'||e.target.id=='pres'){if(utag_data.page_name.toLowerCase()=="rx: authentication: combined: enter info"||utag_data.page_name.toLowerCase()=="rx: authentication: signup"){if($('#labelInf').is(':checked')){gcntFormFieldFocus=0;}
if($('#pres').is(':checked')){gcntFormFieldFocus=0;}}}}
if(e.target.tagName.toLowerCase()=='button'){if(e.target.id=='createAccount'){s.linkTrackVars='events';s.linkTrackEvents='event11,event55';s.events=s.apl(s.events,"event11",",",1);s.events=s.apl(s.events,"event55",",",1);s.track();}}
if(e.target.href!=null&&(e.target.href.indexOf('#')>-1)&&(e.target.href.charAt(e.target.href.indexOf('#')+1)!='/')){s.pageName=e.target.text.trim().toLowerCase();if(e.target.text.trim().toLowerCase()!='delete'){if($('.simple_overlay').is(':visible')){if(s.pageName=='sign in'||s.pageName=='easy reorder'){s.pageName='sign in modal';window.setTimeout(attachSingInFocusEvent,1000);}
if(document.domain.indexOf('cvs.com')>-1){globalAdobeObject.setAdobePageName('adobePage');s.track();}}}}
if(e.target.innerHTML=='Delete'){if(utag_data.page_name.toLowerCase()=='rx: checkout: express verify order'){s.clearVars();gProductsFlag=true;s.linkTrackVars='products,events';s.linkTrackEvents='scRemove';s.products=';999999999;1;;;|eVar47 = CVS|eVar248= 8888886';s.events='scRemove';s.tl(this,'o','Custom:remove from cart');}}
if(e.target.tagName=='INPUT'){if(e.target.id=='secondCheckout'){s.linkTrackVars='events';s.linkTrackEvents='scCheckout';s.events='scCheckout';s.tl(this,'o','Custom:checkout');}}}catch(e){if(s.list1==null){s.list1="Extension Error adobe_TrackAnchorLinks function failed "+e.message;s.events=s.apl(s.events,"event4",",",1);}}}
function trackSignIn(){s.linkTrackVars='eVar34,events,list1';s.linkTrackEvents='event11,event4';s.eVar34="+1";s.c_w('login_temp','1');if($('#cvs-overlay #loginPopup').val()){if(gsensitiveFlag==true){}}
if($('#login_new').val()){if(gsensitiveFlag==true){}}
if($('#userId').val()){if(gsensitiveFlag==true){}}
if($('#loginPopup').val()){if(gsensitiveFlag==true){}}
if($('#signinService_failure').text()){s.list1=$('#signinService_failure').text();s.events=s.apl(s.events,"event4",",",1);}
s.events=s.apl(s.events,"event11",",",1);s.pageName='sign in modal';globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Sign In Submit');}
function attachSingInFocusEvent(){$('#cvs-overlay #loginPopup').focus(function(){if(gcntFormFieldFocus==0){s.clearVars();s.linkTrackVars='eVar10,events';s.eVar10='Sign In Form';s.linkTrackEvents='event10';s.events=s.apl(s.events,"event10",",",1);s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Sign In Email Focus');gcntFormFieldFocus=gcntFormFieldFocus+1;}})
$('#cvs-overlay #passwordPopup').focus(function(){if(gcntFormFieldFocus==0){s.clearVars();s.linkTrackVars='eVar10,events';s.eVar10='Sign In Form';s.linkTrackEvents='event10';s.events=s.apl(s.events,"event10",",",1);s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Sign In Password Focus');gcntFormFieldFocus=gcntFormFieldFocus+1;}})}
function fireAddToBasket(e,cartType){try{s.clearVars();s.linkTrackVars='products,events,eVar71,eVar64,list1';s.linkTrackEvents='scAdd,scOpen,event32,event33,event4';gShoppingCartItems=parseInt($('#0').text().trim());if(gShoppingCartItems==0){s.events='scAdd,scOpen,event32,event33';gShoppingCartItems=gShoppingCartItems+1;}else{s.events='scAdd,event32,event33';}
var lSkuID=utag.data.product_sku_id;var lSkuGroupID='';var lQuantity=0;var lPrice=0;var lSize=0;var lPlace='PDP';if(cartType=='bottom'){lQuantity=1;lPrice=$('#app-pdp.ng-scope.cvs-pdp div.full-load div.body-container.pdp-wrapper div.row.product-main-tab div.product-top-container.col-xs-24 div.col-xs-24.col-sm-10.col-md-8.sidebar brand-widget div.hidden-xs.compare-and-save div.price span.ng-binding:eq(0)').text().trim().substring(1);lSize=$('#app-pdp.ng-scope.cvs-pdp div.full-load div.body-container.pdp-wrapper div.row.product-main-tab div.product-top-container.col-xs-24 div.col-xs-24.col-sm-10.col-md-8.sidebar brand-widget div.hidden-xs.compare-and-save div.details-reviews span.ng-binding:eq(0)').text().split(':')[1].trim();lSkuGroupID=$('#app-pdp.ng-scope.cvs-pdp div.full-load div.body-container.pdp-wrapper div.row.product-main-tab div.product-top-container.col-xs-24 div.col-xs-24.col-sm-10.col-md-8.sidebar brand-widget div.hidden-xs.compare-and-save a').attr('href');lSkuGroupID=lSkuGroupID.split('?')[0];lSkuGroupID=lSkuGroupID.split('-')[lSkuGroupID.split('-').length-1];}else if(cartType=='past'){if(utag_data.page_name=='SHOP: Easy Reorder: My Purchases Dashboard'){lQuantity=1;lPrice=e.target.parentNode.previousSibling.previousSibling.getElementsByClassName('mp-productPrice')[0].children[0].innerText.trim().substring(1);lSize=e.target.parentNode.parentNode.parentNode.parentNode.previousSibling.previousSibling.getElementsByClassName('mp-productMetrics')[0].children[0].innerText.split(':')[1].trim();lSkuGroupID=e.target.parentNode.parentNode.parentNode.parentNode.previousSibling.previousSibling.getElementsByClassName('mp-prodDescription')[0].children[0].href;lSkuGroupID=lSkuGroupID.split('?')[0];lSkuGroupID=lSkuGroupID.split('-')[lSkuGroupID.split('-').length-1];lSkuID=e.target.parentNode.parentNode.parentNode.parentNode.previousSibling.previousSibling.getElementsByClassName('mp-prodDescription')[0].children[0].href;if(lSkuID.indexOf('?')>-1){lSkuID=lSkuID.split('?')[1];if(lSkuID.split('=')[0].toLowerCase()=='skuid'){lSkuID=lSkuID.split('=')[1].trim();}}else{lSkuID=lSkuGroupID;}
lPlace='MyPastPurchase';}else{lQuantity=e.target.getAttribute('data-qty');lPrice=e.target.getAttribute('data-listprice').trim().substring(1);lSize=e.target.parentElement.parentElement.previousSibling.previousSibling.previousSibling.previousSibling.getElementsByClassName('mp-miniProductDetails')[0].children[0].innerText.split(':')[1].trim();lSkuGroupID=e.target.getAttribute('data-prodid');lSkuID=e.target.getAttribute('data-skuid');if(document.location.pathname.indexOf('-prodid-')>-1){lPlace='PDPPastPurchase';}else{lPlace='DashPastPurchase';}}}
else{lSkuGroupID=document.location.pathname.split('-')[document.location.pathname.split('-').length-1];lQuantity=$('#itm-qty').val();lPrice=utag.data.product_price;lSize=utag.data.product_size;}
s.products=';'+lSkuGroupID+';'+lQuantity+';'+lQuantity*lPrice+';event32='+lQuantity*lPrice+'|event33='+lQuantity+';eVar71='+lSkuID+'|eVar64='+lPlace;s.pageName=utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:add to cart');}catch(e){if(s.list1==null){s.linkTrackVars='events,list1';s.linkTrackEvents='event4';s.list1="Extension Error fireAddToBasket function failed "+e.message;s.events=s.apl(s.events,"event4",",",1);s.tl(this,'o','Custom:add to cart');}}}
function fireDeleteFromBasket(e){try{var lSkuID;var lSkuGroupID=e.target.parentElement.parentElement.children[0].getElementsByTagName('a')[0].href;if(lSkuGroupID.split('?')[1]!=null){lSkuID=lSkuGroupID.split('?')[1];}
lSkuGroupID=lSkuGroupID.split('?')[0];lSkuGroupID=lSkuGroupID.split('-')[lSkuGroupID.split('-').length-1];if(lSkuID!=null&&lSkuID.split('=')[0].toLowerCase()=='skuid'){lSkuID=lSkuID.split('=')[1].trim();}else{lSkuID=lSkuGroupID;}
s.clearVars();s.linkTrackVars='products,events,eVar71,list1';s.linkTrackEvents='scRemove,event4';s.events='scRemove';s.products=';'+lSkuGroupID+';;;;eVar71='+lSkuID;s.pageName=utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:remove from cart');}catch(e){if(s.list1==null){s.linkTrackVars='events,list1';s.linkTrackEvents='event4';s.list1="Extension Error fireDeleteFromBasket function failed "+e.message;s.events=s.apl(s.events,"event4",",",1);s.tl(this,'o','Custom:remove from cart');}}}
function adobe_DomInitialize(){try{$('#product-quantity.quantity-button button').click(function(e){if(document.location.pathname.indexOf('-prodid-')>-1){fireAddToBasket(e,'top');}})
$('#app-pdp.ng-scope.cvs-pdp div.full-load div.body-container.pdp-wrapper div.row.product-main-tab div.product-top-container.col-xs-24 div.col-xs-24.col-sm-10.col-md-8.sidebar brand-widget div.hidden-xs.compare-and-save button').click(function(e){if(document.location.pathname.indexOf('-prodid-')>-1){fireAddToBasket(e,'bottom');}})
$('#app-pdp.ng-scope.cvs-pdp div.full-load div.body-container.pdp-wrapper div.row.product-main-tab div.product-top-container.col-xs-24 div.hidden-xs div cvs-my-purchases-horiz.ng-isolate-scope.ng-scope div.mp-pastPurchases ul.mp-pastPurchasesList div.mp-carouselContent li.ng-scope.mp-pastPurchasesListItem div.mp-miniProduct div.mp-miniProductFooter div.mp-miniProductAdd a.ng-binding.addToBasket.mp-addToBasketButton.btn').click(function(e){if(document.location.pathname.indexOf('-prodid-')>-1){fireAddToBasket(e,'past');}})
$('#mainWrapper div.main div.mainPadd cvs-my-purchases-horiz.ng-isolate-scope.ng-scope div.mp-pastPurchases ul.mp-pastPurchasesList div.mp-carouselContent li.ng-scope.mp-pastPurchasesListItem div.mp-miniProduct div.mp-miniProductFooter div.mp-miniProductAdd a.ng-binding.addToBasket.mp-addToBasketButton.btn').click(function(e){if(utag_data.page_name=='MY CVS DASHBOARD'){fireAddToBasket(e,'past');}})
$('#mp-addToBasketMainContainer.ng-scope div.row div.mp-addToBasketContainer.col-sm-15.col-xs-14 button.ng-scope.ng-binding.mp-addToBasketButton.btn').click(function(e){if(utag_data.page_name=='SHOP: Easy Reorder: My Purchases Dashboard'){fireAddToBasket(e,'past');}})
$('#place-order-hover.btnPlaceOrder.btn-block.btn-lg.btn-danger.btn').click(function(e){s.clearVars();s.linkTrackVars='events,list1';s.linkTrackEvents='event34,event4';s.events='event34';s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Submit Order');})
$('#button-hover.btn-block.btn-lg.btn-danger.btn').click(function(e){s.clearVars();s.linkTrackVars='events,list1';s.linkTrackEvents='event34,event4';s.events='event34';s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Submit Order');})
$('.placeorder-btn.btn.btn-danger.btn-lg.btn-block').click(function(e){s.clearVars();s.linkTrackVars='events,list1';s.linkTrackEvents='event34,event4';s.events='event34';s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Submit Order');})
$('#login_new').focus(function(){if(gcntFormFieldFocus==0){s.clearVars();s.linkTrackVars='eVar10,events';s.eVar10='Sign In Form';s.linkTrackEvents='event10';s.events=s.apl(s.events,"event10",",",1);s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Sign In Email Focus');gcntFormFieldFocus=gcntFormFieldFocus+1;}});$('#password_new').focus(function(){if(gcntFormFieldFocus==0){s.clearVars();s.linkTrackVars='eVar10,events';s.eVar10='Sign In Form';s.linkTrackEvents='event10';s.events=s.apl(s.events,"event10",",",1);s.pageName='PDP'+utag.data.page_name;globalAdobeObject.setAdobePageName('adobePage');s.tl(this,'o','Custom:Sign In Password Focus');gcntFormFieldFocus=gcntFormFieldFocus+1;}});$('#firstName, #lastName, #addressLine1, #addressline2, #City, #zipcode').focus(function(){if(utag_data.page_name.toLowerCase()=="rx: authentication: combined: enter info"){if(gcntFormFieldFocus==0){s.linkTrackVars='eVar46,events';s.eVar46="Demographic Info";s.tl(this,'o','Custom: Entered Patient Info');gcntFormFieldFocus=gcntFormFieldFocus+1;}}});$('.update ').click(function(e){cartUpdate(e);});$('.remove').click(function(e){cartUpdate(e);});$('.delTxt').click(function(e){index1=$('.delTxt').index(this);index=((($('.delTxt').index(this))+1)/2);var lSkuID;var lSkuGroupID=$('.delTxt')[index1].parentElement.parentElement.parentElement.previousSibling.previousSibling.children[0].getElementsByTagName('a')[0].href
if(lSkuGroupID.split('?')[1]!=null){lSkuID=lSkuGroupID.split('?')[1];}
lSkuGroupID=lSkuGroupID.split('?')[0];lSkuGroupID=lSkuGroupID.split('-')[lSkuGroupID.split('-').length-1];lSkuID=utag.data.product_sku_id[index-1];removeProd.push({skuid:lSkuID,units:utag.data.product_quantity[index-1],prodPrice:utag.data.product_price[index-1],prodGroupId:lSkuGroupID});cartUpdate(e);});$('.mp-update').click(function(e){easyOrder(e);});$('.mp-delete').click(function(e){easyOrder(e);});var prodQuantity=[];var addProd=[]
var removeProd=[];var addProdString='';var removeProdString='';var index=0;var index1=0;function cartUpdate(e){try{for(var i=0;i<$('.qty_prod').length;i++){prodQuantity[i]=($('.qty_prod')[i].value);}
var utagProdQuant=utag.data.product_quantity;var utagProdSkuId=utag.data.product_sku_id;var utagProdPrice=utag.data.product_price;for(var i=0;i<$('.qty_prod').length;i++){if((prodQuantity[i]-utagProdQuant[i])>0&&prodQuantity[i]<=99){addProd.push({skuid:utagProdSkuId[i],units:Math.abs(prodQuantity[i]-utagProdQuant[i]),prodPrice:utagProdPrice[i],prodGroupId:$('.Product_Hdr')[i+i].children[0].href.split('?')[0].split('-')[$('.Product_Hdr')[i+i].children[0].href.split('-').length-1]});}else if((prodQuantity[i]-utagProdQuant[i])<0){if(removeProd[i]!=null&&removeProd[i].skuid!=null&&removeProd[i].skuid==utagProdSkuId[index-1]){}else{removeProd.push({skuid:utagProdSkuId[i],units:Math.abs(prodQuantity[i]-utagProdQuant[i]),prodPrice:utagProdPrice[i],prodGroupId:$('.Product_Hdr')[i+i].children[0].href.split('?')[0].split('-')[$('.Product_Hdr')[i+i].children[0].href.split('-').length-1]});}}else{}}
if(addProd.length>0){for(var i=0;i<addProd.length;i++){addProdString=addProdString+';'+addProd[i].prodGroupId+';'+addProd[i].units+';'+((addProd[i].prodPrice)*(addProd[i].units)).toFixed(2)+';event32='+((addProd[i].prodPrice)*(addProd[i].units)).toFixed(2)+'|event33='+addProd[i].units+';eVar71='+addProd[i].skuid+'|eVar64= Cart';}
s.clearVars();s.linkTrackVars='products,events,eVar71,eVar64,list1';s.linkTrackEvents='scAdd,scOpen,event32,event33,event4';gShoppingCartItems=parseInt($('#0').text().trim());if(gShoppingCartItems==0){s.events='scAdd,scOpen,event32,event33';gShoppingCartItems=gShoppingCartItems+1;}else{s.events='scAdd,event32,event33';}
s.products=addProdString;s.tl(this,'o','Custom:add to cart');}
if(removeProd.length>0){for(var j=0;j<removeProd.length;j++){removeProdString=removeProdString+';'+removeProd[j].prodGroupId+';'+removeProd[j].units+';;;eVar71='+removeProd[j].skuid;}
s.clearVars();s.linkTrackVars='products,events,eVar71,list1';s.linkTrackEvents='scRemove,event4';s.events='scRemove';s.products=removeProdString;s.tl(this,'o','Custom:remove from cart');}}catch(e){if(s.list1==null){s.list1="Extension Error cartUpdate function failed "+e.message;s.events="event4";}}}
if($('.mp-qtyNum').length>0){for(var i=0;i<$('.mp-qtyNum').length;i++){prodQuantity[i]=($('.mp-qtyNum')[i].value);}}
function easyOrder(e){try{for(var i=0;i<$('.mp-qtyNum').length;i++){if((angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].cartDetails.qty-prodQuantity[i])>0){addProd.push({skuid:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuId,units:Math.abs(angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].cartDetails.qty-prodQuantity[i]),prodPrice:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].salePrice,prodGroupId:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuDetailsUrl.split('?')[0].split('-')[angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuDetailsUrl.split('-').length-1]});}else if((angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].cartDetails.qty-prodQuantity[i])<0){removeProd.push({skuid:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuId,units:Math.abs(angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].cartDetails.qty-prodQuantity[i]),prodPrice:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].salePrice,prodGroupId:angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuDetailsUrl.split('?')[0].split('-')[angular.element($('.mp-product')).scope().reorderCtrl.itemList[i].skuDetailsUrl.split('-').length-1]});}}
if(addProd.length>0){for(var i=0;i<addProd.length;i++){addProdString=addProdString+';'+addProd[i].prodGroupId+';'+addProd[i].units+';'+((addProd[i].prodPrice)*(addProd[i].units)).toFixed(2)+';event32='+((addProd[i].prodPrice)*(addProd[i].units)).toFixed(2)+'|event33='+addProd[i].units+';eVar71='+addProd[i].skuid+'|eVar64= MyPastPurchase';}
s.clearVars();s.linkTrackVars='products,events,eVar71,eVar64,list1';s.linkTrackEvents='scAdd,scOpen,event32,event33,event4';gShoppingCartItems=parseInt($('#0').text().trim());if(gShoppingCartItems==0){s.events='scAdd,scOpen,event32,event33';gShoppingCartItems=gShoppingCartItems+1;}else{s.events='scAdd,event32,event33';}
s.products=addProdString;s.tl(this,'o','Custom:add to cart');}
if(removeProd.length>0){for(var j=0;j<removeProd.length;j++){removeProdString=removeProdString+';'+removeProd[j].prodGroupId+';'+removeProd[j].units+';;;eVar71='+removeProd[j].skuid;}
s.clearVars();s.linkTrackVars='products,events,eVar71,list1';s.linkTrackEvents='scRemove,event4';s.events='scRemove';s.products=removeProdString;s.tl(this,'o','Custom:remove from cart');}
for(var i=0;i<$('.mp-qtyNum').length;i++){prodQuantity[i]=($('.mp-qtyNum')[i].value);}
addProd=[];removeProd=[];addProdString=[];removeProdString=[];}catch(e){if(s.list1==null){s.list1="Extension Error easyOrder function failed "+e.message;s.events="event4";}}}
$('#rxnumber, #storeNo, #cvsstrno, #cvsrxno').focus(function(){if(utag_data.page_name.toLowerCase()=="rx: authentication: combined: enter info"||utag_data.page_name.toLowerCase()=="rx: authentication: signup"){if(gcntFormFieldFocus==0){s.linkTrackVars='eVar46,events';s.eVar46="Pill info";s.tl(this,'o','Custom: Entered Prescription Info');gcntFormFieldFocus=gcntFormFieldFocus+1;}}});$('.inputText').not('!#cvsstrno, !#cvsrxno').focus(function(){if(utag_data.page_name.toLowerCase()=="rx: authentication: signup"){if(gcntFormFieldFocus==0){s.linkTrackVars='eVar46,events';s.eVar46="Demographic Info";s.tl(this,'o','Custom: Entered Patient Info');gcntFormFieldFocus=gcntFormFieldFocus+1;}}});}catch(e){}}
function adobe_Initialize(e){try{$('#creatAccount').click(function(e){if($('#newECCard').is(':checked')){s.linkTrackVars='eVar58,events';s.eVar58="Create New";s.tl(this,'o','Custom: ro: ec:create new');}});if($('#findECC')[0]){$('#findECC').on("change",function(e){if(utag_data.scenario_step_number=='3'&&(utag_data.page_name.toLowerCase()=='create registration account'||utag_data.page_name.toLowerCase()=='regopt: find extracard rewards number lightbox')&&utag_data.scenario_name.toLowerCase()=='registration optimization'){if($('#findECC').val().length>=12){s.linkTrackVars='eVar58,events';s.eVar58="Manual";s.tl(this,'o','Custom: ro: ec:manual');}}});}
if($('extra-care-account-directive')[0]){$('extra-care-account-directive').on("DOMSubtreeModified",function(){if(utag_data.scenario_step_number=='3'&&(utag_data.page_name.toLowerCase()=='create registration account'||utag_data.page_name.toLowerCase()=='regopt: find extracard rewards number lightbox')&&utag_data.scenario_name.toLowerCase()=='registration optimization'){if(gEcCounter=='false'){if($('.eccImg').is(':visible')){s.linkTrackVars='eVar58,events';s.eVar58="auto populate";s.tl(this,'o','Custom: ro: ec:auto populate');gEcCounter='true'}}}});}
if($('.transition-class')[0]){$('.transition-class').on("DOMSubtreeModified",function(){if($(".transition-class").text()==angular.element('.transition-class').scope().slideFnMsgList.ExtracaresearchingFinished){gLookUpFlag='true';}
if($(".transition-class").text()==angular.element('.transition-class').scope().slideFnMsgList.MatchingPharmacy){if(utag_data.scenario_step_number=='5'&&utag_data.page_name.toLowerCase()=='create registration account'&&utag_data.scenario_name.toLowerCase()=='registration optimization'){s.linkTrackVars='eVar9,pageName,eVar46,events';s.eVar9="2002";s.eVar46='auto';s.pageName=utag_data.page_name+"|"+utag_data.scenario_step_number;globalAdobeObject.setAdobePageName('adobePage');s.linkTrackEvents='event8,event55,event3,event52';s.events=s.apl(s.events,"event8",",",1);s.events=s.apl(s.events,"event55",",",1);s.events=s.apl(s.events,"event3",",",1);s.events=s.apl(s.events,"event52",",",1);s.track();}}
if($(".transition-class").text()==angular.element('.transition-class').scope().slideFnMsgList.provideMoreInfo){if(utag_data.page_name!=undefined){if(utag_data.scenario_step_number=='3'&&utag_data.page_name.toLowerCase()=='create registration account'&&utag_data.scenario_name.toLowerCase()=='registration optimization'){s.linkTrackVars='pageName,eVar3,events';s.eVar3='EC Enrollment';s.linkTrackEvents='event2';s.events=s.apl(s.events,"event2",",",1);s.pageName=utag_data.page_name+"|"+utag_data.scenario_step_number;globalAdobeObject.setAdobePageName('adobePage');s.track();}}}});}}catch(e){if(s.list1==null){s.list1="Extension Error adobe_Initialize function failed "+e.message;s.events="event4";}}}
if(document.addEventListener)
document.addEventListener('click',adobe_TrackAnchorLinks,false);else
document.attachEvent('onclick',adobe_TrackAnchorLinks);if(utag_data.page_name!=undefined){if(utag_data.page_name=='MY CVS DASHBOARD'||utag_data.page_name.toLowerCase()=='account: login'||utag_data.page_name=='SHOP: Easy Reorder: My Purchases Dashboard'||document.location.pathname.indexOf('-prodid-')>-1||utag_data.page_name=='SHOP: SHOPPING CART'||utag_data.page_name=='SEARCH: SEARCH RESULTS'||document.location.pathname.indexOf('checkout.jsp')>-1||utag_data.page_name.toLowerCase()=='rx: authentication: combined: enter info'||utag_data.page_name.toLowerCase()=="rx: authentication: signup"){adobe_DomInitialize();}}
if(window.addEventListener)
window.addEventListener('load',adobe_Initialize,false);else
window.attachEvent('onload',adobe_Initialize);}catch(e){}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.298 ut4.0.201808291751, Copyright 2018 Tealium.com Inc. All Rights Reserved.
!function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return r(i?i:e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){(function(i){function n(){function e(){h.windowLoaded=!0}i.addEventListener?i.addEventListener("load",e):i.attachEvent&&i.attachEvent("onload",e),h.codeLoadEnd=(new Date).getTime()}
var r=e("./child/ChildVisitor"),a=e("./child/Message"),s=e("./child/makeChildMessageListener"),o=e("./utils/asyncParallelApply"),l=e("./utils/enums"),u=e("./utils/utils"),d=e("./utils/getDomain"),c=e("./units/version"),f=e("./units/crossDomain"),g=e("@adobe-mcid/visitor-js-shared/lib/ids/generateRandomID"),p=e("./units/makeCorsRequest"),m=e("./units/makeDestinationPublishing"),_=e("./utils/constants"),h=function(e,t,n){function r(e){var t=e;return function(e){var i=e||v.location.href;try{var n=S._extractParamFromUri(i,t);if(n)return H.parsePipeDelimetedKeyValues(n)}catch(e){}}}function h(e){function t(e,t){e&&e.match(_.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[k],S.setMarketingCloudVisitorID),S._setFieldExpire(V,-1),t(e[R],S.setAnalyticsVisitorID)}function C(e){e=e||{},S._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",S._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},S._supplementalDataIDLast=e.supplementalDataIDLast||"",S._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function D(e){function t(e,t,i){return i=i?i+="|":i,i+=e+"="+encodeURIComponent(t)}function i(e){var t=H.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}function n(e,i){var n=i[0],r=i[1];return null!=r&&r!==N&&(e=t(n,r,e)),e}var r=e.reduce(n,"");return i(r)}function I(e){var t=20160,i=e.minutesToLive,n="";return(S.idSyncDisableSyncs||S.disableIdSyncs)&&(n=n?n:"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n?n:"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n?n:"Error: config.url is empty"),"undefined"==typeof i?i=t:(i=parseInt(i,10),(isNaN(i)||i<=0)&&(n=n?n:"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:i}}if(!n||n.split("").reverse().join("")!==e)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var S=this;S.version="3.1.2";var v=i,A=v.Visitor;A.version=S.version,A.AuthState=l.AUTH_STATE,A.OptOut=l.OPT_OUT,v.s_c_in||(v.s_c_il=[],v.s_c_in=0),S._c="Visitor",S._il=v.s_c_il,S._in=v.s_c_in,S._il[S._in]=S,v.s_c_in++,S._log={requests:[]},S.marketingCloudOrgID=e,S.cookieName="AMCV_"+e,S.sessionCookieName="AMCVS_"+e,S.cookieDomain=d(),S.cookieDomain===v.location.hostname&&(S.cookieDomain=""),S.loadSSL=v.location.protocol.toLowerCase().indexOf("https")>=0,S.loadTimeout=3e4,S.CORSErrors=[],S.marketingCloudServer=S.audienceManagerServer="dpm.demdex.net",S.sdidParamExpiry=30;var y=v.document,M=null,b="MC",k="MCMID",E="MCORGID",T="MCCIDH",O="MCSYNCSOP",w="MCIDTS",L="MCOPTOUT",P="A",R="MCAID",F="AAM",x="MCAAMLH",V="MCAAMB",N="NONE",j=function(e){return!Object.prototype[e]},U=p(S,G);S.FIELDS=l.FIELDS,S.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+y.cookie).split(" ").join(";"),i=t.indexOf(";"+e+"="),n=i<0?i:t.indexOf(";",i+1),r=i<0?"":decodeURIComponent(t.substring(i+2+e.length,n<0?t.length:n));return r},S.cookieWrite=function(e,t,i){var n,r=S.cookieLifetime;if(t=""+t,r=r?(""+r).toUpperCase():"",i&&"SESSION"!==r&&"NONE"!==r){if(n=""!==t?parseInt(r?r:0,10):-60)i=new Date,i.setTime(i.getTime()+1e3*n);else if(1===i){i=new Date;var a=i.getYear();i.setYear(a+2+(a<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(y.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(S.cookieDomain?" domain="+S.cookieDomain+";":""),S.cookieRead(e)===t):0},S.resetState=function(e){e?S._mergeServerState(e):C()},S._isAllowedDone=!1,S._isAllowedFlag=!1,S.isAllowed=function(){return S._isAllowedDone||(S._isAllowedDone=!0,(S.cookieRead(S.cookieName)||S.cookieWrite(S.cookieName,"T",1))&&(S._isAllowedFlag=!0)),S._isAllowedFlag},S.setMarketingCloudVisitorID=function(e){S._setMarketingCloudFields(e)},S._use1stPartyMarketingCloudServer=!1,S.getMarketingCloudVisitorID=function(e,t){if(S.isAllowed()){S.marketingCloudServer&&S.marketingCloudServer.indexOf(".demdex.net")<0&&(S._use1stPartyMarketingCloudServer=!0);var i=S._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return S._getRemoteField(k,n,e,t,i)}return""},S.getVisitorValues=function(e,t){var i={MCMID:{fn:S.getMarketingCloudVisitorID,args:[!0],context:S},MCOPTOUT:{fn:S.isOptedOut,args:[void 0,!0],context:S},MCAID:{fn:S.getAnalyticsVisitorID,args:[!0],context:S},MCAAMLH:{fn:S.getAudienceManagerLocationHint,args:[!0],context:S},MCAAMB:{fn:S.getAudienceManagerBlob,args:[!0],context:S}},n=t&&t.length?H.pluck(i,t):i;o(n,e)},S._currentCustomerIDs={},S._customerIDsHashChanged=!1,S._newCustomerIDsHash="",S.setCustomerIDs=function(e){function t(){S._customerIDsHashChanged=!1}if(S.isAllowed()&&e){S._readVisitor();var i,n;for(i in e)if(j(i)&&(n=e[i]))if("object"==typeof n){var r={};n.id&&(r.id=n.id),void 0!=n.authState&&(r.authState=n.authState),S._currentCustomerIDs[i]=r}else S._currentCustomerIDs[i]={id:n};var a=S.getCustomerIDs(),s=S._getField(T),o="";s||(s=0);for(i in a)j(i)&&(n=a[i],o+=(o?"|":"")+i+"|"+(n.id?n.id:"")+(n.authState?n.authState:""));S._newCustomerIDsHash=S._hash(o),S._newCustomerIDsHash!==s&&(S._customerIDsHashChanged=!0,S._mapCustomerIDs(t))}},S.getCustomerIDs=function(){S._readVisitor();var e,t,i={};for(e in S._currentCustomerIDs)j(e)&&(t=S._currentCustomerIDs[e],i[e]||(i[e]={}),t.id&&(i[e].id=t.id),void 0!=t.authState?i[e].authState=t.authState:i[e].authState=A.AuthState.UNKNOWN);return i},S.setAnalyticsVisitorID=function(e){S._setAnalyticsFields(e)},S.getAnalyticsVisitorID=function(e,t,i){if(!H.isTrackingServerPopulated()&&!i)return S._callCallback(e,[""]),"";if(S.isAllowed()){var n="";if(i||(n=S.getMarketingCloudVisitorID(function(t){S.getAnalyticsVisitorID(e,!0)})),n||i){var r=i?S.marketingCloudServer:S.trackingServer,a="";S.loadSSL&&(i?S.marketingCloudServerSecure&&(r=S.marketingCloudServerSecure):S.trackingServerSecure&&(r=S.trackingServerSecure));var s={};if(r){var o="http"+(S.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+S.version+"&mcorgid="+encodeURIComponent(S.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(S.idSyncDisable3rdPartySyncing||S.disableThirdPartyCookies?"&d_coppa=true":""),u=["s_c_il",S._in,"_set"+(i?"MarketingCloud":"Analytics")+"Fields"];a=o+"?"+l+"&callback=s_c_il%5B"+S._in+"%5D._set"+(i?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+l,s.callback=u}return s.url=a,S._getRemoteField(i?k:R,a,e,t,s)}}return""},S.getAudienceManagerLocationHint=function(e,t){if(S.isAllowed()){var i=S.getMarketingCloudVisitorID(function(t){S.getAudienceManagerLocationHint(e,!0)});if(i){var n=S._getField(R);if(!n&&H.isTrackingServerPopulated()&&(n=S.getAnalyticsVisitorID(function(t){S.getAudienceManagerLocationHint(e,!0)})),n||!H.isTrackingServerPopulated()){var r=S._getAudienceManagerURLData(),a=r.url;return S._getRemoteField(x,a,e,t,r)}}}return""},S.getLocationHint=S.getAudienceManagerLocationHint,S.getAudienceManagerBlob=function(e,t){if(S.isAllowed()){var i=S.getMarketingCloudVisitorID(function(t){S.getAudienceManagerBlob(e,!0)});if(i){var n=S._getField(R);if(!n&&H.isTrackingServerPopulated()&&(n=S.getAnalyticsVisitorID(function(t){S.getAudienceManagerBlob(e,!0)})),n||!H.isTrackingServerPopulated()){var r=S._getAudienceManagerURLData(),a=r.url;return S._customerIDsHashChanged&&S._setFieldExpire(V,-1),S._getRemoteField(V,a,e,t,r)}}}return""},S._supplementalDataIDCurrent="",S._supplementalDataIDCurrentConsumed={},S._supplementalDataIDLast="",S._supplementalDataIDLastConsumed={},S.getSupplementalDataID=function(e,t){S._supplementalDataIDCurrent||t||(S._supplementalDataIDCurrent=S._generateID(1));var i=S._supplementalDataIDCurrent;return S._supplementalDataIDLast&&!S._supplementalDataIDLastConsumed[e]?(i=S._supplementalDataIDLast,S._supplementalDataIDLastConsumed[e]=!0):i&&(S._supplementalDataIDCurrentConsumed[e]&&(S._supplementalDataIDLast=S._supplementalDataIDCurrent,S._supplementalDataIDLastConsumed=S._supplementalDataIDCurrentConsumed,S._supplementalDataIDCurrent=i=t?"":S._generateID(1),S._supplementalDataIDCurrentConsumed={}),i&&(S._supplementalDataIDCurrentConsumed[e]=!0)),i},S.getOptOut=function(e,t){if(S.isAllowed()){var i=S._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return S._getRemoteField(L,n,e,t,i)}return""},S.isOptedOut=function(e,t,i){if(S.isAllowed()){t||(t=A.OptOut.GLOBAL);var n=S.getOptOut(function(i){var n=i===A.OptOut.GLOBAL||i.indexOf(t)>=0;S._callCallback(e,[n])},i);return n?n===A.OptOut.GLOBAL||n.indexOf(t)>=0:null}return!1},S._fields=null,S._fieldsExpired=null,S._hash=function(e){var t,i,n=0;if(e)for(t=0;t<e.length;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n&=n;return n},S._generateID=g,S._generateLocalMID=function(){var e=S._generateID(0);return q.isClientSideMarketingCloudVisitorID=!0,e},S._callbackList=null,S._callCallback=function(e,t){try{"function"==typeof e?e.apply(v,t):e[1].apply(e[0],t)}catch(e){}},S._registerCallback=function(e,t){t&&(null==S._callbackList&&(S._callbackList={}),void 0==S._callbackList[e]&&(S._callbackList[e]=[]),S._callbackList[e].push(t))},S._callAllCallbacks=function(e,t){if(null!=S._callbackList){var i=S._callbackList[e];if(i)for(;i.length>0;)S._callCallback(i.shift(),t)}},S._addQuerystringParam=function(e,t,i,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(i),a=H.parseHash(e),s=H.hashlessUrl(e),o=s.indexOf("?")===-1;if(o)return s+"?"+r+a;var l=s.split("?"),u=l[0]+"?",d=l[1],c=H.addQueryParamAtLocation(d,r,n);return u+c+a},S._extractParamFromUri=function(e,t){var i=new RegExp("[\\?&#]"+t+"=([^&#]*)"),n=i.exec(e);if(n&&n.length)return decodeURIComponent(n[1])},S._parseAdobeMcFromUrl=r(_.ADOBE_MC),S._parseAdobeMcSdidFromUrl=r(_.ADOBE_MC_SDID),S._attemptToPopulateSdidFromUrl=function(t){var i=S._parseAdobeMcSdidFromUrl(t),n=1e9;i&&i.TS&&(n=H.getTimestampInSeconds()-i.TS),i&&i.SDID&&i[E]===e&&n<S.sdidParamExpiry&&(S._supplementalDataIDCurrent=i.SDID,S._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},S._attemptToPopulateIdsFromUrl=function(){var t=S._parseAdobeMcFromUrl();if(t&&t.TS){var i=H.getTimestampInSeconds(),n=i-t.TS,r=Math.floor(n/60);if(r>_.ADOBE_MC_TTL_IN_MIN||t[E]!==e)return;h(t)}},S._mergeServerState=function(e){function t(e){H.isObject(e)&&S.setCustomerIDs(e)}function i(e){return H.isObject(e)?e:JSON.parse(e)}if(e)try{if(e=i(e),e[S.marketingCloudOrgID]){var n=e[S.marketingCloudOrgID];t(n.customerIDs),C(n.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},S._timeout=null,S._loadData=function(e,t,i,n){var r="d_fieldgroup";t=S._addQuerystringParam(t,r,e,1),n.url=S._addQuerystringParam(n.url,r,e,1),n.corsUrl=S._addQuerystringParam(n.corsUrl,r,e,1),q.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===U.corsMetadata.corsType&&U.fireCORS(n,i,e)},S._clearTimeout=function(e){null!=S._timeout&&S._timeout[e]&&(clearTimeout(S._timeout[e]),S._timeout[e]=0)},S._settingsDigest=0,S._getSettingsDigest=function(){if(!S._settingsDigest){var e=S.version;S.audienceManagerServer&&(e+="|"+S.audienceManagerServer),S.audienceManagerServerSecure&&(e+="|"+S.audienceManagerServerSecure),S._settingsDigest=S._hash(e)}return S._settingsDigest},S._readVisitorDone=!1,S._readVisitor=function(){if(!S._readVisitorDone){S._readVisitorDone=!0;var e,t,i,n,r,a,s=S._getSettingsDigest(),o=!1,l=S.cookieRead(S.cookieName),u=new Date;if(null==S._fields&&(S._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==s&&(o=!0),l.shift()),l.length%2===1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),i=t[0],n=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),o&&(i===T&&(n=""),r>0&&(r=u.getTime()/1e3-60)),i&&n&&(S._setField(i,n,1),r>0&&(S._fields["expire"+i]=r+(a?"s":""),(u.getTime()>=1e3*r||a&&!S.cookieRead(S.sessionCookieName))&&(S._fieldsExpired||(S._fieldsExpired={}),S._fieldsExpired[i]=!0)));!S._getField(R)&&H.isTrackingServerPopulated()&&(l=S.cookieRead("s_vi"),l&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(n=l[1],e=n.indexOf("["),e>=0&&(n=n.substring(0,e)),n&&n.match(_.VALID_VISITOR_ID_REGEX)&&S._setField(R,n))))}},S._appendVersionTo=function(e){var t="vVersion|"+S.version,i=e?S._getCookieVersion(e):null;return i?c.areVersionsDifferent(i,S.version)&&(e=e.replace(_.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},S._writeVisitor=function(){var e,t,i=S._getSettingsDigest();for(e in S._fields)j(e)&&S._fields[e]&&"expire"!==e.substring(0,6)&&(t=S._fields[e],i+=(i?"|":"")+e+(S._fields["expire"+e]?"-"+S._fields["expire"+e]:"")+"|"+t);i=S._appendVersionTo(i),S.cookieWrite(S.cookieName,i,1)},S._getField=function(e,t){return null==S._fields||!t&&S._fieldsExpired&&S._fieldsExpired[e]?null:S._fields[e]},S._setField=function(e,t,i){null==S._fields&&(S._fields={}),S._fields[e]=t,i||S._writeVisitor()},S._getFieldList=function(e,t){var i=S._getField(e,t);return i?i.split("*"):null},S._setFieldList=function(e,t,i){S._setField(e,t?t.join("*"):"",i)},S._getFieldMap=function(e,t){var i=S._getFieldList(e,t);if(i){var n,r={};for(n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return r}return null},S._setFieldMap=function(e,t,i){var n,r=null;if(t){r=[];for(n in t)j(n)&&(r.push(n),r.push(t[n]))}S._setFieldList(e,r,i)},S._setFieldExpire=function(e,t,i){var n=new Date;n.setTime(n.getTime()+1e3*t),null==S._fields&&(S._fields={}),S._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(i?"s":""),t<0?(S._fieldsExpired||(S._fieldsExpired={}),S._fieldsExpired[e]=!0):S._fieldsExpired&&(S._fieldsExpired[e]=!1),i&&(S.cookieRead(S.sessionCookieName)||S.cookieWrite(S.sessionCookieName,"1"))},S._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&(e=e.toUpperCase(),"NOTARGET"===e&&(e=N)),e&&(e===N||e.match(_.VALID_VISITOR_ID_REGEX))||(e="")),e},S._setFields=function(e,t){if(S._clearTimeout(e),null!=S._loading&&(S._loading[e]=!1),q.fieldGroupObj[e]&&q.setState(e,!1),e===b){q.isClientSideMarketingCloudVisitorID!==!0&&(q.isClientSideMarketingCloudVisitorID=!1);var i=S._getField(k);if(!i||S.overwriteCrossDomainMCIDAndAID){if(i="object"==typeof t&&t.mid?t.mid:S._findVisitorID(t),!i){if(S._use1stPartyMarketingCloudServer&&!S.tried1stPartyMarketingCloudServer)return S.tried1stPartyMarketingCloudServer=!0,void S.getAnalyticsVisitorID(null,!1,!0);i=S._generateLocalMID()}S._setField(k,i)}i&&i!==N||(i=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&S._setFields(F,t),S._use1stPartyMarketingCloudServer&&t.mid&&S._setFields(P,{id:t.id})),S._callAllCallbacks(k,[i])}if(e===F&&"object"==typeof t){var n=604800;void 0!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10));var r=B.getRegionAndCheckIfChanged(t,n);S._callAllCallbacks(x,[r]);var a=S._getField(V);(t.d_blob||t.blob)&&(a=t.d_blob,a||(a=t.blob),S._setFieldExpire(V,n),S._setField(V,a)),a||(a=""),S._callAllCallbacks(V,[a]),!t.error_msg&&S._newCustomerIDsHash&&S._setField(T,S._newCustomerIDsHash)}if(e===P){var s=S._getField(R);s&&!S.overwriteCrossDomainMCIDAndAID||(s=S._findVisitorID(t),s?s!==N&&S._setFieldExpire(V,-1):s=N,S._setField(R,s)),s&&s!==N||(s=""),S._callAllCallbacks(R,[s])}if(S.idSyncDisableSyncs||S.disableIdSyncs)B.idCallNotProcesssed=!0;else{B.idCallNotProcesssed=!1;var o={};o.ibs=t.ibs,o.subdomain=t.subdomain,B.processIDCallData(o)}if(t===Object(t)){var l,u;S.isAllowed()&&(l=S._getField(L)),l||(l=N,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),u=parseInt(t.d_ottl,10),isNaN(u)&&(u=7200),S._setFieldExpire(L,u,!0),S._setField(L,l)),S._callAllCallbacks(L,[l])}},S._loading=null,S._getRemoteField=function(e,t,i,n,r){var a,s="",o=H.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(S.isAllowed()){S._readVisitor(),s=S._getField(e,l[e]===!0);var u=function(){return(!s||S._fieldsExpired&&S._fieldsExpired[e])&&(!S.disableThirdPartyCalls||o)};if(u()){if(e===k||e===L?a=b:e===x||e===V?a=F:e===R&&(a=P),a)return!t||null!=S._loading&&S._loading[a]||(null==S._loading&&(S._loading={}),S._loading[a]=!0,S._loadData(a,t,function(t){if(!S._getField(e)){t&&q.setState(a,!0);var i="";e===k?i=S._generateLocalMID():a===F&&(i={error_msg:"timeout"}),S._setFields(a,i)}},r)),S._registerCallback(e,i),s?s:(t||S._setFields(a,{id:N}),"")}else s||(e===k?(S._registerCallback(e,i),s=S._generateLocalMID(),S.setMarketingCloudVisitorID(s)):e===R?(S._registerCallback(e,i),s="",S.setAnalyticsVisitorID(s)):(s="",n=!0))}return e!==k&&e!==R||s!==N||(s="",n=!0),i&&n&&S._callCallback(i,[s]),s},S._setMarketingCloudFields=function(e){S._readVisitor(),S._setFields(b,e)},S._mapCustomerIDs=function(e){S.getAudienceManagerBlob(e,!0)},S._setAnalyticsFields=function(e){S._readVisitor(),S._setFields(P,e)},S._setAudienceManagerFields=function(e){S._readVisitor(),S._setFields(F,e)},S._getAudienceManagerURLData=function(e){var t=S.audienceManagerServer,i="",n=S._getField(k),r=S._getField(V,!0),a=S._getField(R),s=a&&a!==N?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(S.loadSSL&&S.audienceManagerServerSecure&&(t=S.audienceManagerServerSecure),t){var o,l,u=S.getCustomerIDs();if(u)for(o in u)j(o)&&(l=u[o],s+="&d_cid_ic="+encodeURIComponent(o)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var d="http"+(S.loadSSL?"s":"")+"://"+t+"/id",c="d_visid_ver="+S.version+"&d_rtbd=json&d_ver=2"+(!n&&S._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(S.marketingCloudOrgID)+"&d_nsid="+(S.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(S.idSyncDisable3rdPartySyncing||S.disableThirdPartyCookies?"&d_coppa=true":"")+(M===!0?"&d_coop_safe=1":M===!1?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+s,f=["s_c_il",S._in,e];return i=d+"?"+c+"&d_cb=s_c_il%5B"+S._in+"%5D."+e,{url:i,corsUrl:d+"?"+c,callback:f}}return{url:i}},S.appendVisitorIDsTo=function(e){try{var t=[[k,S._getField(k)],[R,S._getField(R)],[E,S.marketingCloudOrgID]];return S._addQuerystringParam(e,_.ADOBE_MC,D(t))}catch(t){return e}},S.appendSupplementalDataIDTo=function(e,t){if(t=t||S.getSupplementalDataID(H.generateRandomString(),!0),!t)return e;try{var i=D([["SDID",t],[E,S.marketingCloudOrgID]]);return S._addQuerystringParam(e,_.ADOBE_MC_SDID,i)}catch(t){return e}};var H={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,i){var n=e.split("&");return i=null!=i?i:n.length,n.splice(i,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,i){if(e!==R)return!1;var n;return t||(t=S.trackingServer),i||(i=S.trackingServerSecure),n=S.loadSSL?i:t,!("string"!=typeof n||!n.length)&&(n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+(S.cookieDomain?" domain="+S.cookieDomain+";":"")},isTrackingServerPopulated:function(){return!!S.trackingServer||!!S.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){var t=e.split("|");return t.reduce(function(e,t){var i=t.split("=");return e[i[0]]=decodeURIComponent(i[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=i[Math.floor(Math.random()*i.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&(e[i]=t);return e},pluck:function(e,t){return t.reduce(function(t,i){return e[i]&&(t[i]=e[i]),t},Object.create(null))}};S._helpers=H;var B=m(S,A);S._destinationPublishing=B,S.timeoutMetricsLog=[];var G,q={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case b:t===!1?this.MCIDCallTimedOut!==!0&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case P:t===!1?this.AnalyticsIDCallTimedOut!==!0&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case F:t===!1?this.AAMIDCallTimedOut!==!0&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};S.isClientSideMarketingCloudVisitorID=function(){return q.isClientSideMarketingCloudVisitorID},S.MCIDCallTimedOut=function(){return q.MCIDCallTimedOut},S.AnalyticsIDCallTimedOut=function(){return q.AnalyticsIDCallTimedOut},S.AAMIDCallTimedOut=function(){return q.AAMIDCallTimedOut},S.idSyncGetOnPageSyncInfo=function(){return S._readVisitor(),S._getField(O)},S.idSyncByURL=function(e){var t=I(e||{});if(t.error)return t.error;var i,n,r=e.url,a=encodeURIComponent,s=B;return r=r.replace(/^https:/,"").replace(/^http:/,""),i=u.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",a(e.dpid),"img",a(r),t.ttl,"",i],s.addMessage(n.join("|")),s.requestToProcess(),"Successfully queued"},S.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,S.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},S._getCookieVersion=function(e){e=e||S.cookieRead(S.cookieName);var t=_.VERSION_REGEX.exec(e),i=t&&t.length>1?t[1]:null;return i},S._resetAmcvCookie=function(e){var t=S._getCookieVersion();t&&!c.isLessThan(t,e)||H.removeCookie(S.cookieName)},S.setAsCoopSafe=function(){M=!0},S.setAsCoopUnsafe=function(){M=!1},S.init=function(){function i(){if(t&&"object"==typeof t){S.configs=Object.create(null);for(var e in t)j(e)&&(S[e]=t[e],S.configs[e]=t[e]);S.idSyncContainerID=S.idSyncContainerID||0,M="boolean"==typeof S.isCoopSafe?S.isCoopSafe:H.parseBoolean(S.isCoopSafe),S.resetBeforeVersion&&S._resetAmcvCookie(S.resetBeforeVersion),S._attemptToPopulateIdsFromUrl(),S._attemptToPopulateSdidFromUrl(),S._readVisitor();var i=S._getField(w),n=Math.ceil((new Date).getTime()/_.MILLIS_PER_DAY);S.idSyncDisableSyncs||S.disableIdSyncs||!B.canMakeSyncIDCall(i,n)||(S._setFieldExpire(V,-1),S._setField(w,n)),S.getMarketingCloudVisitorID(),S.getAudienceManagerLocationHint(),S.getAudienceManagerBlob(),S._mergeServerState(S.serverState)}else S._attemptToPopulateIdsFromUrl(),S._attemptToPopulateSdidFromUrl()}function n(){if(!S.idSyncDisableSyncs&&!S.disableIdSyncs){B.checkDPIframeSrc();var e=function(){var e=B;e.readyToAttachIframe()&&e.attachIframe()};v.addEventListener("load",function(){A.windowLoaded=!0,e()});try{f.receiveMessage(function(e){B.receiveMessage(e.data)},B.iframeHost)}catch(e){}}}function r(){S.whitelistIframeDomains&&_.POST_MESSAGE_ENABLED&&(S.whitelistIframeDomains=S.whitelistIframeDomains instanceof Array?S.whitelistIframeDomains:[S.whitelistIframeDomains],S.whitelistIframeDomains.forEach(function(t){var i=new a(e,t),n=s(S,i);f.receiveMessage(n,t)}))}i(),n(),r()}};h.getInstance=function(e,t){function n(){var t=i.s_c_il;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r&&"Visitor"===r._c&&r.marketingCloudOrgID===e)return r}}function a(){try{return i.self!==i.parent}catch(e){return!0}}function s(){i.s_c_il.splice(--i.s_c_in,1)}function o(e){var t="TEST_AMCV_COOKIE";return e.cookieWrite(t,"T",1),"T"===e.cookieRead(t)&&(e._helpers.removeCookie(t),!0)}if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var l=n();if(l)return l;var d=e,c=d.split("").reverse().join(""),f=new h(e,null,c);s();var g=u.getIeVersion(),p="number"==typeof g&&g<10;if(p)return f._helpers.replaceMethodsWithFunction(f,function(){});var m=a()&&!o(f)&&i.parent?new r(e,t,f,i.parent):new h(e,t,c);return f=null,m.init(),m},n(),i.Visitor=h,t.exports=h}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./child/ChildVisitor":2,"./child/Message":3,"./child/makeChildMessageListener":4,"./units/crossDomain":8,"./units/makeCorsRequest":9,"./units/makeDestinationPublishing":10,"./units/version":11,"./utils/asyncParallelApply":12,"./utils/constants":14,"./utils/enums":15,"./utils/getDomain":16,"./utils/utils":18,"@adobe-mcid/visitor-js-shared/lib/ids/generateRandomID":19}],2:[function(e,t,i){(function(i){e("../utils/polyfills");var n=e("./strategies/LocalVisitor"),r=e("./strategies/ProxyVisitor"),a=e("./strategies/PlaceholderVisitor"),s=e("../utils/callbackRegistryFactory"),o=e("./Message"),l=e("../utils/enums"),u=l.MESSAGES;t.exports=function(e,t,l,d){function c(e){Object.assign(I,e)}function f(e){Object.assign(I.state,e),I.callbackRegistry.executeAll(I.state)}function g(e){if(!A.isInvalid(e)){v=!1;var t=A.parse(e);I.setStateAndPublish(t.state)}}function p(e){!v&&S&&(v=!0,A.send(d,e))}function m(){var e=!0;c(new n(l._generateID)),I.getMarketingCloudVisitorID(),I.callbackRegistry.executeAll(I.state,e),i.removeEventListener("message",_)}function _(e){if(!A.isInvalid(e)){var t=A.parse(e);v=!1,i.clearTimeout(this.timeout),i.removeEventListener("message",_),c(new r(I)),i.addEventListener("message",g),I.setStateAndPublish(t.state),I.callbackRegistry.hasCallbacks()&&p(u.GETSTATE)}}function h(){var e=250;S&&postMessage?(i.addEventListener("message",_),p(u.HANDSHAKE),this.timeout=setTimeout(m,e)):m()}function C(){i.s_c_in||(i.s_c_il=[],i.s_c_in=0),I._c="Visitor",I._il=i.s_c_il,I._in=i.s_c_in,I._il[I._in]=I,i.s_c_in++}function D(){function e(e){0!==e.indexOf("_")&&"function"==typeof l[e]&&(I[e]=function(){})}Object.keys(l).forEach(e),I.getSupplementalDataID=l.getSupplementalDataID}var I=this,S=t.whitelistParentDomain;I.state={},I.version=l.version,I.marketingCloudOrgID=e;var v=!1,A=new o(e,S);I.callbackRegistry=s(),I.init=function(){C(),D(),c(new a(I)),h()},I.findField=function(e,t){if(I.state[e])return t(I.state[e]),I.state[e]},I.messageParent=p,I.setStateAndPublish=f}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/callbackRegistryFactory":13,"../utils/enums":15,"../utils/polyfills":17,"./Message":3,"./strategies/LocalVisitor":5,"./strategies/PlaceholderVisitor":6,"./strategies/ProxyVisitor":7}],3:[function(e,t,i){var n=e("../utils/enums"),r=n.MESSAGES,a={0:"prefix",1:"orgID",2:"state"};t.exports=function(e,t){this.parse=function(e){try{var t={},i=e.data.split("|");return i.forEach(function(e,i){if(void 0!==e){var n=a[i];t[n]=2!==i?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(i){var n=this.parse(i);if(!n||Object.keys(n).length<2)return!0;var a=e!==n.orgID,s=!t||i.origin!==t,o=Object.keys(r).indexOf(n.prefix)===-1;return a||s||o},this.send=function(i,n,r){var a=n+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{i.postMessage(a,t)}catch(e){}}}},{"../utils/enums":15}],4:[function(e,t,i){var n=e("../utils/enums"),r=e("../utils/utils"),a=n.MESSAGES,s=n.ALL_APIS,o=n.ASYNC_API_MAP,l=n.FIELDGROUP_TO_FIELD;t.exports=function(e,t){function i(){var t={};return Object.keys(s).forEach(function(i){var n=s[i],a=e[n]();r.isValueEmpty(a)||(t[i]=a)}),t}function n(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(i){if(e._loading[i]){var n=l[i];t.push(n)}}),t.length?t:null}function u(t){return function i(r){var a=n();if(a){var s=o[a[0]];e[s](i,!0)}else t()}}function d(e,n){var r=i();t.send(e,n,r)}function c(e){g(e),d(e,a.HANDSHAKE)}function f(e){var t=u(function(){d(e,a.PARENTSTATE)});t()}function g(i){function n(n){r.call(e,n),t.send(i,a.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=n}return function(e){if(!t.isInvalid(e)){var i=t.parse(e).prefix,n=i===a.HANDSHAKE?c:f;n(e.source)}}}},{"../utils/enums":15,"../utils/utils":18}],5:[function(e,t,i){var n=e("../../utils/enums"),r=n.STATE_KEYS_MAP;t.exports=function(e){function t(){}function i(t,i){var n=this;return function(){var t=e(0,r.MCMID),a={};return a[r.MCMID]=t,n.setStateAndPublish(a),i(t),t}}this.getMarketingCloudVisitorID=function(e){e=e||t;var n=this.findField(r.MCMID,e),a=i.call(this,r.MCMID,e);return"undefined"!=typeof n?n:a()}}},{"../../utils/enums":15}],6:[function(e,t,i){var n=e("../../utils/enums"),r=n.ASYNC_API_MAP;t.exports=function(){Object.keys(r).forEach(function(e){var t=r[e];this[t]=function(t){this.callbackRegistry.add(e,t)}},this)}},{"../../utils/enums":15}],7:[function(e,t,i){var n=e("../../utils/enums"),r=n.MESSAGES,a=n.ASYNC_API_MAP,s=n.SYNC_API_MAP;t.exports=function(){function e(){}function t(e,t){var i=this;return function(){return i.callbackRegistry.add(e,t),i.messageParent(r.GETSTATE),""}}function i(i){var n=a[i];this[n]=function(n){n=n||e;var r=this.findField(i,n),a=t.call(this,i,n);return"undefined"!=typeof r?r:a()}}function n(t){var i=s[t];this[i]=function(){var i=this.findField(t,e);return i||{}}}Object.keys(a).forEach(i,this),Object.keys(s).forEach(n,this)}},{"../../utils/enums":15}],8:[function(e,t,i){(function(e){var i=!!e.postMessage;t.exports={postMessage:function(e,t,n){var r=1;t&&(i?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+r++ +"&"+e))},receiveMessage:function(t,n){var r;try{i&&(t&&(r=function(e){return!("string"==typeof n&&e.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&n(e.origin)===!1)&&void t(e)}),e.addEventListener?e[t?"addEventListener":"removeEventListener"]("message",r):e[t?"attachEvent":"detachEvent"]("onmessage",r))}catch(e){}}}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,i){(function(e){t.exports=function(t,i){return{corsMetadata:function(){var t="none",i=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?t="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(i=!1),Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0&&(i=!1)),{corsType:t,corsCookiesEnabled:i}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new e[this.corsMetadata.corsType]},fireCORS:function(i,n,r){function a(t){var n;try{if(n=JSON.parse(t),n!==Object(n))return void s.handleCORSError(i,null,"Response is not JSON")}catch(e){return void s.handleCORSError(i,e,"Error parsing response as JSON")}try{for(var r=i.callback,a=e,o=0;o<r.length;o++)a=a[r[o]];a(n)}catch(e){s.handleCORSError(i,e,"Error forming callback function")}}var s=this;n&&(i.loadErrorHandler=n);try{var o=this.getCORSInstance();o.open("get",i.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=t.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&a(this.responseText)}),o.onerror=function(e){s.handleCORSError(i,e,"onerror")},o.ontimeout=function(e){s.handleCORSError(i,e,"ontimeout")},o.send(),t._log.requests.push(i.corsUrl)}catch(e){this.handleCORSError(i,e,"try-catch")}},handleCORSError:function(e,i,n){t.CORSErrors.push({corsData:e,error:i,description:n}),e.loadErrorHandler&&("ontimeout"===n?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}}}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,i){(function(i){var n=e("../utils/constants"),r=e("./crossDomain"),a=e("../utils/utils"),s="MCSYNCSOP",o="MCSYNCS",l="MCAAMLH";t.exports=function(e,t){var u=i.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",n="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(u.location.href);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+n,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(u.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:n.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframe:function(){return!e.idSyncDisable3rdPartySyncing&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){n=u.createElement("iframe"),n.sandbox="allow-scripts allow-same-origin",n.title="Adobe ID Syncing iFrame",n.id=i.id,n.name=i.id+"_name",n.style.cssText="display: none; width: 0; height: 0;",n.src=i.url,i.newIframeCreated=!0,t(),u.body.appendChild(n)}function t(){n.addEventListener("load",function(){n.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,n=u.getElementById(this.id);n?"IFRAME"!==n.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==n.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=n,this.requestToProcess())):e(),this.iframe=n},requestToProcess:function(t){function i(){a.jsonForComparison.push(t),a.jsonWaiting.push(t),a.processSyncOnPage(t)}var r,a=this;if(t===Object(t)&&t.ibs)if(r=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var s,o,l,u=!1;for(s=0,o=this.jsonForComparison.length;s<o;s++)if(l=this.jsonForComparison[s],r===JSON.stringify(l.ibs||[])){u=!0;break}u?this.jsonDuplicates.push(t):i()}else i();if((this.receivedThirdPartyCookiesNotification||!n.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var d=this.jsonWaiting.shift();this.process(d),this.requestToProcess()}!e.idSyncDisableSyncs&&this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){a.messageSendingInterval=n.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,i){var n=e._getField(l),r=t.d_region||t.dcs_region;return n?r&&(e._setFieldExpire(l,i),e._setField(l,r),parseInt(n,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField(s,""),e._setField(o,""),n=r)):(n=r,n&&(e._setFieldExpire(l,i),e._setField(l,n))),n||(n=""),n},processSyncOnPage:function(e){var t,i,n,r;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(n=0;n<i;n++)r=t[n],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,i,n,r,s,o=encodeURIComponent,l="",u=!1;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(u=!0,n=0;n<i;n++)r=t[n],s=[o("ibs"),o(r.id||""),o(r.tag||""),a.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"",l,r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(s.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,s.join("|")));u&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,i,r){var a="syncOnPage"===r,l=a?s:o;e._readVisitor();var u,d,c=e._getField(l),f=!1,g=!1,p=Math.ceil((new Date).getTime()/n.MILLIS_PER_DAY);c?(u=c.split("*"),d=this.pruneSyncData(u,t.id,p),f=d.dataPresent,g=d.dataValid,f&&g||this.fireSync(a,t,i,u,l,p)):(u=[],this.fireSync(a,t,i,u,l,p))},pruneSyncData:function(e,t,i){var n,r,a,s=!1,o=!1;for(r=0;r<e.length;r++)n=e[r],a=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(s=!0,i<a?o=!0:(e.splice(r,1),r--)):i>=a&&(e.splice(r,1),r--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,i,n,r,a,s){var o=this;if(t){if("img"===i.tag){var l,u,d,c,f=i.url,g=e.loadSSL?"https:":"http:";for(l=0,u=f.length;l<u;l++){d=f[l],c=/^\/\//.test(d);var p=new Image;p.addEventListener("load",function(t,i,n,r){return function(){o.onPagePixels[t]=null,e._readVisitor();var s,l=e._getField(a),u=[];if(l){s=l.split("*");var d,c,f;for(d=0,c=s.length;d<c;d++)f=s[d],f.match("^"+i.id+"-")||u.push(f)}o.setSyncTrackingData(u,i,n,r)}}(this.onPagePixels.length,i,a,s)),p.src=(c?g:"")+d,this.onPagePixels.push(p)}}}else this.addMessage(n),this.setSyncTrackingData(r,i,a,s)},addMessage:function(t){var i=encodeURIComponent,r=i(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((n.POST_MESSAGE_ENABLED?"":r)+t)},setSyncTrackingData:function(t,i,n,r){t.push(i.id+"-"+(r+Math.ceil(i.ttl/60/24))),this.manageSyncsSize(t),e._setField(n,t.join("*"))},sendMessages:function(){var e,t=this,i="",r=encodeURIComponent;this.regionChanged&&(i=r("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?n.POST_MESSAGE_ENABLED?(e=i+r("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(i+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){r.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,i=/^---destpub-to-parent---/;"string"==typeof e&&i.test(e)&&(t=e.replace(i,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===u.readyState||"loaded"===u.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,i){return e._forceSyncIDCall||!t||i-t>n.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(u.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants":14,"../utils/utils":18,"./crossDomain":8}],11:[function(e,t,i){function n(e){for(var t=/^\d+$/,i=0,n=e.length;i<n;i++)if(!t.test(e[i]))return!1;return!0}function r(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function a(e,t){for(var i=0;i<e.length;i++){var n=parseInt(e[i],10),r=parseInt(t[i],10);if(n>r)return 1;if(r>n)return-1}return 0}function s(e,t){if(e===t)return 0;var i=e.toString().split("."),s=t.toString().split(".");return n(i.concat(s))?(r(i,s),a(i,s)):NaN}t.exports={compare:s,isLessThan:function(e,t){return s(e,t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,t)>0},isEqual:function(e,t){return 0===s(e,t)}}},{}],12:[function(e,t,i){t.exports=function(e,t){function i(e){return function(i){n[e]=i,r++;var s=r===a;s&&t(n)}}var n={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var n=e[t];if(n.fn){var r=n.args||[];r.unshift(i(t)),n.fn.apply(n.context||null,r)}})}},{}],13:[function(e,t,i){function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var i=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(i,1)}},execute:function(e,t){if(this.callbacks[e]){t="undefined"==typeof t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var i=this.callbacks[e].shift();"function"==typeof i?i.apply(null,t):i instanceof Array&&i[1].apply(i[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!r.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var i=void 0!==e[t]?e[t]:"";this.execute(t,i)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}var r=e("./utils");t.exports=n},{"./utils":18}],14:[function(e,t,i){(function(e){t.exports={POST_MESSAGE_ENABLED:!!e.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,i){i.MESSAGES={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},i.STATE_KEYS_MAP={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},i.ASYNC_API_MAP={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},i.SYNC_API_MAP={CUSTOMERIDS:"getCustomerIDs"},i.ALL_APIS={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},i.FIELDGROUP_TO_FIELD={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},i.FIELDS={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},i.AUTH_STATE={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},i.OPT_OUT={GLOBAL:"global"}},{}],16:[function(e,t,i){(function(e){t.exports=function(t){var i;if(!t&&e.location&&(t=e.location.hostname),i=t)if(/^[0-9.]+$/.test(i))i="";else{var n=",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,",r=i.split("."),a=r.length-1,s=a-1;if(a>1&&r[a].length<=2&&(2===r[a-1].length||n.indexOf(","+r[a]+",")<0)&&s--,s>0)for(i="";a>=s;)i=r[a]+(i?".":"")+i,a--}return i}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t,i){Object.assign=Object.assign||function(e){for(var t,i,n=1;n<arguments.length;++n){i=arguments[n];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}},{}],18:[function(e,t,i){i.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},i.isValueEmpty=function(e){return""===e||i.isObjectEmpty(e)},i.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},i.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)}},{}],19:[function(e,t,i){t.exports=function(e){var t,i,n="0123456789",r="",a="",s=8,o=10,l=10;if(1==e){for(n+="ABCDEF",t=0;16>t;t++)i=Math.floor(Math.random()*s),r+=n.substring(i,i+1),i=Math.floor(Math.random()*s),a+=n.substring(i,i+1),s=16;return r+"-"+a}for(t=0;19>t;t++)i=Math.floor(Math.random()*o),r+=n.substring(i,i+1),0===t&&9==i?o=3:(1==t||2==t)&&10!=o&&2>i?o=10:2<t&&(o=10),i=Math.floor(Math.random()*l),a+=n.substring(i,i+1),0===t&&9==i?l=3:(1==t||2==t)&&10!=l&&2>i?l=10:2<t&&(l=10);return r+a}},{}]},{},[1]);AdobeVisitor=Visitor.getInstance("06660D1556E030D17F000101@AdobeOrg",{trackingServer:"sit-metrics.cvshealth.com",trackingServerSecure:"sit-metrics.cvshealth.com",});try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("298","cvs.cvs");}catch(error){utag.DB(error);}
(function(){ if(typeof utag!='undefined'){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();} })();
</script>
</head>
<body>
<h1>See how tags are fired into Adobe - CVS Profile</h1>
<script>

   //single page app tagging
   var amp_data = {page_name:pagename,
                page_link:g,
                    page_flag: "amp" //we send data to Adobe in lower case; CVS standard
                   }
            utag.view(amp_data);
</script>
</body>
